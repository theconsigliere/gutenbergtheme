{"version":3,"sources":["../flickity.js"],"names":["window","factory","define","amd","jQuery","module","_typeof","exports","require","jQueryBridget","arraySlice","Array","prototype","slice","console","logError","message","error","namespace","PluginClass","$","methodCall","$elems","methodName","args","returnValue","pluginMethodStr","each","i","elem","instance","data","method","charAt","value","apply","undefined","plainCall","options","option","_init","opts","isPlainObject","this","extend","fn","arg0","call","arguments","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","off","length","index","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","parseFloat","isNaN","measurements","measurementsLength","getStyle","style","getComputedStyle","isBoxSizeOuter","isSetup","div","document","createElement","width","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","Math","round","removeChild","setup","querySelector","nodeType","display","size","height","innerWidth","innerHeight","outerWidth","outerHeight","getZeroSize","offsetWidth","offsetHeight","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","selector","fizzyUIUtils","utils","a","b","prop","modulo","makeArray","obj","isArray","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","Flickity","Cell","parent","element","create","position","setAttribute","x","shift","destroy","unselect","side","originSide","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","target","cellAlign","getPositionValue","select","classList","add","removeAttribute","remove","wrapShift","slideableWidth","Slide","isOriginLeft","cells","addCell","cell","max","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","getCellElements","map","animatePrototype","startAnimation","isAnimating","restingFrames","animate","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","requestAnimationFrame","wrapAround","shiftWrapCells","setTranslateX","dispatchScrollEvent","is3d","cursorPosition","rightToLeft","translateX","slider","transform","firstSlide","slides","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","velocity","percentPosition","isPointerDown","isFreeScrolling","selectedIndex","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","getFrictionFactor","applyForce","force","getRestingPosition","isDraggable","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","defaults","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","id","guid","viewport","_createSlider","watchCSS","activate","isActive","_filterFindCellElements","children","reloadCells","tabIndex","selectInitialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","len","updateSlides","_containSlides","slide","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","parseInt","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","left","right","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","min","emitArgs","$event","jQEvent","Event","trigger","isWrap","isInstant","_wrapSelect","prevIndex","wrapIndex","delta","abs","backWrapDelta","forewardWrapDelta","isDragSelect","previous","next","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectedElement","initialIndex","queryCell","selectCell","getCellSlideIndex","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","preventDefault","focus","onresize","content","deactivate","onkeydown","isNotFocused","activeElement","handler","keyboardHandlers","keyCode","37","leftMethod","39","rightMethod","prevScrollY","pageYOffset","preventScroll","scrollTo","pageXOffset","removeEventListener","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isAdd","bindMethod","startEvent","PointerEvent","getTouch","touches","touch","identifier","pointerIdentifier","onmousedown","button","_pointerDown","ontouchstart","changedTouches","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","ontouchmove","pointerMove","onmouseup","_pointerUp","onpointerup","ontouchend","_pointerDone","pointerUp","_pointerReset","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","pageX","y","pageY","Unidragger","bindHandles","_bindHandles","unbindHandles","touchAction","_touchActionValue","handles","handle","okayPointerDown","pointerDownPointer","pointerDownBlur","cursorNodes","TEXTAREA","INPUT","SELECT","OPTION","clickTypes","radio","checkbox","submit","image","file","isCursorNode","nodeName","isClickType","isOkay","focused","blur","moveVector","_dragPointerMove","_dragMove","isDragging","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","isPreventingClicks","dragStart","dragMove","bind","dragEnd","onclick","isIgnoringMouseUp","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","onActivateDrag","_uiChangeDrag","onDeactivateDrag","updateDraggable","bindDrag","unbindDrag","_pointerDownPreventDefault","pointerDownFocus","pointerDownScroll","getScrollPosition","_pointerDownDefault","focusNodes","isTouchStart","isTouchPointer","pointerType","isFocusNode","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","Date","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","distance","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","d","md","isWrapAround","wrap","floor","clickedCell","onscroll","scroll","scrollMoveX","scrollMoveY","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","disable","svg","createSVG","update","createElementNS","path","pathMovements","shape","x0","x1","y1","x2","y2","x3","getArrowMovements","arrowShape","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","handleClick","onClick","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","onTap","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","hidden","tick","time","autoPlay","clear","stop","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","getCellsFragment","isAppend","insertCellElement","insertBefore","endCells","cellChange","append","prepend","minCellIndex","cellSizeChange","changedCellIndex","isPositioningSlider","prevSelectedElem","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","lazyloadAttr","srcAttr","srcsetAttr","imgs","getCellLazyImages","src","srcset","onload","complete","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","companionCells","t","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","url","Image","reURL","exec","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded"],"mappings":"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","sourcesContent":["/*!\n * Flickity PACKAGED v2.2.1\n * Touch, responsive, flickable carousels\n *\n * Licensed GPLv3 for open source use\n * or Flickity Commercial License for commercial use\n *\n * https://flickity.metafizzy.co\n * Copyright 2015-2019 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.1\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n    // universal module definition\n    /*jshint strict: false */ /* globals define, module, require */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\n        return factory( window, jQuery );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('jquery')\n      );\n    } else {\n      // browser global\n      window.jQueryBridget = factory(\n        window,\n        window.jQuery\n      );\n    }\n  \n  }( window, function factory( window, jQuery ) {\n  'use strict';\n  \n  // ----- utils ----- //\n  \n  var arraySlice = Array.prototype.slice;\n  \n  // helper function for logging errors\n  // $.error breaks jQuery chaining\n  var console = window.console;\n  var logError = typeof console == 'undefined' ? function() {} :\n    function( message ) {\n      console.error( message );\n    };\n  \n  // ----- jQueryBridget ----- //\n  \n  function jQueryBridget( namespace, PluginClass, $ ) {\n    $ = $ || jQuery || window.jQuery;\n    if ( !$ ) {\n      return;\n    }\n  \n    // add option method -> $().plugin('option', {...})\n    if ( !PluginClass.prototype.option ) {\n      // option setter\n      PluginClass.prototype.option = function( opts ) {\n        // bail out if not an object\n        if ( !$.isPlainObject( opts ) ){\n          return;\n        }\n        this.options = $.extend( true, this.options, opts );\n      };\n    }\n  \n    // make jQuery plugin\n    $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\n      if ( typeof arg0 == 'string' ) {\n        // method call $().plugin( 'methodName', { options } )\n        // shift arguments by 1\n        var args = arraySlice.call( arguments, 1 );\n        return methodCall( this, arg0, args );\n      }\n      // just $().plugin({ options })\n      plainCall( this, arg0 );\n      return this;\n    };\n  \n    // $().plugin('methodName')\n    function methodCall( $elems, methodName, args ) {\n      var returnValue;\n      var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n  \n      $elems.each( function( i, elem ) {\n        // get instance\n        var instance = $.data( elem, namespace );\n        if ( !instance ) {\n          logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\n            pluginMethodStr );\n          return;\n        }\n  \n        var method = instance[ methodName ];\n        if ( !method || methodName.charAt(0) == '_' ) {\n          logError( pluginMethodStr + ' is not a valid method' );\n          return;\n        }\n  \n        // apply method, get return value\n        var value = method.apply( instance, args );\n        // set return value if value is returned, use only first value\n        returnValue = returnValue === undefined ? value : returnValue;\n      });\n  \n      return returnValue !== undefined ? returnValue : $elems;\n    }\n  \n    function plainCall( $elems, options ) {\n      $elems.each( function( i, elem ) {\n        var instance = $.data( elem, namespace );\n        if ( instance ) {\n          // set options & init\n          instance.option( options );\n          instance._init();\n        } else {\n          // initialize new instance\n          instance = new PluginClass( elem, options );\n          $.data( elem, namespace, instance );\n        }\n      });\n    }\n  \n    updateJQuery( $ );\n  \n  }\n  \n  // ----- updateJQuery ----- //\n  \n  // set $.bridget for v1 backwards compatibility\n  function updateJQuery( $ ) {\n    if ( !$ || ( $ && $.bridget ) ) {\n      return;\n    }\n    $.bridget = jQueryBridget;\n  }\n  \n  updateJQuery( jQuery || window.jQuery );\n  \n  // -----  ----- //\n  \n  return jQueryBridget;\n  \n  }));\n  \n  /**\n   * EvEmitter v1.1.0\n   * Lil' event emitter\n   * MIT License\n   */\n  \n  /* jshint unused: true, undef: true, strict: true */\n  \n  ( function( global, factory ) {\n    // universal module definition\n    /* jshint strict: false */ /* globals define, module, window */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD - RequireJS\n      define( 'ev-emitter/ev-emitter',factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS - Browserify, Webpack\n      module.exports = factory();\n    } else {\n      // Browser globals\n      global.EvEmitter = factory();\n    }\n  \n  }( typeof window != 'undefined' ? window : this, function() {\n  \n  \n  \n  function EvEmitter() {}\n  \n  var proto = EvEmitter.prototype;\n  \n  proto.on = function( eventName, listener ) {\n    if ( !eventName || !listener ) {\n      return;\n    }\n    // set events hash\n    var events = this._events = this._events || {};\n    // set listeners array\n    var listeners = events[ eventName ] = events[ eventName ] || [];\n    // only add once\n    if ( listeners.indexOf( listener ) == -1 ) {\n      listeners.push( listener );\n    }\n  \n    return this;\n  };\n  \n  proto.once = function( eventName, listener ) {\n    if ( !eventName || !listener ) {\n      return;\n    }\n    // add event\n    this.on( eventName, listener );\n    // set once flag\n    // set onceEvents hash\n    var onceEvents = this._onceEvents = this._onceEvents || {};\n    // set onceListeners object\n    var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n    // set flag\n    onceListeners[ listener ] = true;\n  \n    return this;\n  };\n  \n  proto.off = function( eventName, listener ) {\n    var listeners = this._events && this._events[ eventName ];\n    if ( !listeners || !listeners.length ) {\n      return;\n    }\n    var index = listeners.indexOf( listener );\n    if ( index != -1 ) {\n      listeners.splice( index, 1 );\n    }\n  \n    return this;\n  };\n  \n  proto.emitEvent = function( eventName, args ) {\n    var listeners = this._events && this._events[ eventName ];\n    if ( !listeners || !listeners.length ) {\n      return;\n    }\n    // copy over to avoid interference if .off() in listener\n    listeners = listeners.slice(0);\n    args = args || [];\n    // once stuff\n    var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n  \n    for ( var i=0; i < listeners.length; i++ ) {\n      var listener = listeners[i]\n      var isOnce = onceListeners && onceListeners[ listener ];\n      if ( isOnce ) {\n        // remove listener\n        // remove before trigger to prevent recursion\n        this.off( eventName, listener );\n        // unset once flag\n        delete onceListeners[ listener ];\n      }\n      // trigger listener\n      listener.apply( this, args );\n    }\n  \n    return this;\n  };\n  \n  proto.allOff = function() {\n    delete this._events;\n    delete this._onceEvents;\n  };\n  \n  return EvEmitter;\n  \n  }));\n  \n  /*!\n   * getSize v2.0.3\n   * measure size of elements\n   * MIT license\n   */\n  \n  /* jshint browser: true, strict: true, undef: true, unused: true */\n  /* globals console: false */\n  \n  ( function( window, factory ) {\n    /* jshint strict: false */ /* globals define, module */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'get-size/get-size',factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory();\n    } else {\n      // browser global\n      window.getSize = factory();\n    }\n  \n  })( window, function factory() {\n  'use strict';\n  \n  // -------------------------- helpers -------------------------- //\n  \n  // get a number from a string, not a percentage\n  function getStyleSize( value ) {\n    var num = parseFloat( value );\n    // not a percent like '100%', and a number\n    var isValid = value.indexOf('%') == -1 && !isNaN( num );\n    return isValid && num;\n  }\n  \n  function noop() {}\n  \n  var logError = typeof console == 'undefined' ? noop :\n    function( message ) {\n      console.error( message );\n    };\n  \n  // -------------------------- measurements -------------------------- //\n  \n  var measurements = [\n    'paddingLeft',\n    'paddingRight',\n    'paddingTop',\n    'paddingBottom',\n    'marginLeft',\n    'marginRight',\n    'marginTop',\n    'marginBottom',\n    'borderLeftWidth',\n    'borderRightWidth',\n    'borderTopWidth',\n    'borderBottomWidth'\n  ];\n  \n  var measurementsLength = measurements.length;\n  \n  function getZeroSize() {\n    var size = {\n      width: 0,\n      height: 0,\n      innerWidth: 0,\n      innerHeight: 0,\n      outerWidth: 0,\n      outerHeight: 0\n    };\n    for ( var i=0; i < measurementsLength; i++ ) {\n      var measurement = measurements[i];\n      size[ measurement ] = 0;\n    }\n    return size;\n  }\n  \n  // -------------------------- getStyle -------------------------- //\n  \n  /**\n   * getStyle, get style of element, check for Firefox bug\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n   */\n  function getStyle( elem ) {\n    var style = getComputedStyle( elem );\n    if ( !style ) {\n      logError( 'Style returned ' + style +\n        '. Are you running this code in a hidden iframe on Firefox? ' +\n        'See https://bit.ly/getsizebug1' );\n    }\n    return style;\n  }\n  \n  // -------------------------- setup -------------------------- //\n  \n  var isSetup = false;\n  \n  var isBoxSizeOuter;\n  \n  /**\n   * setup\n   * check isBoxSizerOuter\n   * do on first getSize() rather than on page load for Firefox bug\n   */\n  function setup() {\n    // setup once\n    if ( isSetup ) {\n      return;\n    }\n    isSetup = true;\n  \n    // -------------------------- box sizing -------------------------- //\n  \n    /**\n     * Chrome & Safari measure the outer-width on style.width on border-box elems\n     * IE11 & Firefox<29 measures the inner-width\n     */\n    var div = document.createElement('div');\n    div.style.width = '200px';\n    div.style.padding = '1px 2px 3px 4px';\n    div.style.borderStyle = 'solid';\n    div.style.borderWidth = '1px 2px 3px 4px';\n    div.style.boxSizing = 'border-box';\n  \n    var body = document.body || document.documentElement;\n    body.appendChild( div );\n    var style = getStyle( div );\n    // round value for browser zoom. desandro/masonry#928\n    isBoxSizeOuter = Math.round( getStyleSize( style.width ) ) == 200;\n    getSize.isBoxSizeOuter = isBoxSizeOuter;\n  \n    body.removeChild( div );\n  }\n  \n  // -------------------------- getSize -------------------------- //\n  \n  function getSize( elem ) {\n    setup();\n  \n    // use querySeletor if elem is string\n    if ( typeof elem == 'string' ) {\n      elem = document.querySelector( elem );\n    }\n  \n    // do not proceed on non-objects\n    if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n      return;\n    }\n  \n    var style = getStyle( elem );\n  \n    // if hidden, everything is 0\n    if ( style.display == 'none' ) {\n      return getZeroSize();\n    }\n  \n    var size = {};\n    size.width = elem.offsetWidth;\n    size.height = elem.offsetHeight;\n  \n    var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n  \n    // get all measurements\n    for ( var i=0; i < measurementsLength; i++ ) {\n      var measurement = measurements[i];\n      var value = style[ measurement ];\n      var num = parseFloat( value );\n      // any 'auto', 'medium' value will be 0\n      size[ measurement ] = !isNaN( num ) ? num : 0;\n    }\n  \n    var paddingWidth = size.paddingLeft + size.paddingRight;\n    var paddingHeight = size.paddingTop + size.paddingBottom;\n    var marginWidth = size.marginLeft + size.marginRight;\n    var marginHeight = size.marginTop + size.marginBottom;\n    var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n    var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n  \n    var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n  \n    // overwrite width and height if we can get it from style\n    var styleWidth = getStyleSize( style.width );\n    if ( styleWidth !== false ) {\n      size.width = styleWidth +\n        // add padding and border unless it's already including it\n        ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n    }\n  \n    var styleHeight = getStyleSize( style.height );\n    if ( styleHeight !== false ) {\n      size.height = styleHeight +\n        // add padding and border unless it's already including it\n        ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n    }\n  \n    size.innerWidth = size.width - ( paddingWidth + borderWidth );\n    size.innerHeight = size.height - ( paddingHeight + borderHeight );\n  \n    size.outerWidth = size.width + marginWidth;\n    size.outerHeight = size.height + marginHeight;\n  \n    return size;\n  }\n  \n  return getSize;\n  \n  });\n  \n  /**\n   * matchesSelector v2.0.2\n   * matchesSelector( element, '.selector' )\n   * MIT license\n   */\n  \n  /*jshint browser: true, strict: true, undef: true, unused: true */\n  \n  ( function( window, factory ) {\n    /*global define: false, module: false */\n    'use strict';\n    // universal module definition\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'desandro-matches-selector/matches-selector',factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory();\n    } else {\n      // browser global\n      window.matchesSelector = factory();\n    }\n  \n  }( window, function factory() {\n    'use strict';\n  \n    var matchesMethod = ( function() {\n      var ElemProto = window.Element.prototype;\n      // check for the standard method name first\n      if ( ElemProto.matches ) {\n        return 'matches';\n      }\n      // check un-prefixed\n      if ( ElemProto.matchesSelector ) {\n        return 'matchesSelector';\n      }\n      // check vendor prefixes\n      var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n  \n      for ( var i=0; i < prefixes.length; i++ ) {\n        var prefix = prefixes[i];\n        var method = prefix + 'MatchesSelector';\n        if ( ElemProto[ method ] ) {\n          return method;\n        }\n      }\n    })();\n  \n    return function matchesSelector( elem, selector ) {\n      return elem[ matchesMethod ]( selector );\n    };\n  \n  }));\n  \n  /**\n   * Fizzy UI utils v2.0.7\n   * MIT license\n   */\n  \n  /*jshint browser: true, undef: true, unused: true, strict: true */\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /*jshint strict: false */ /*globals define, module, require */\n  \n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'fizzy-ui-utils/utils',[\n        'desandro-matches-selector/matches-selector'\n      ], function( matchesSelector ) {\n        return factory( window, matchesSelector );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('desandro-matches-selector')\n      );\n    } else {\n      // browser global\n      window.fizzyUIUtils = factory(\n        window,\n        window.matchesSelector\n      );\n    }\n  \n  }( window, function factory( window, matchesSelector ) {\n  \n  \n  \n  var utils = {};\n  \n  // ----- extend ----- //\n  \n  // extends objects\n  utils.extend = function( a, b ) {\n    for ( var prop in b ) {\n      a[ prop ] = b[ prop ];\n    }\n    return a;\n  };\n  \n  // ----- modulo ----- //\n  \n  utils.modulo = function( num, div ) {\n    return ( ( num % div ) + div ) % div;\n  };\n  \n  // ----- makeArray ----- //\n  \n  var arraySlice = Array.prototype.slice;\n  \n  // turn element or nodeList into an array\n  utils.makeArray = function( obj ) {\n    if ( Array.isArray( obj ) ) {\n      // use object if already an array\n      return obj;\n    }\n    // return empty array if undefined or null. #6\n    if ( obj === null || obj === undefined ) {\n      return [];\n    }\n  \n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n    if ( isArrayLike ) {\n      // convert nodeList to array\n      return arraySlice.call( obj );\n    }\n  \n    // array of single index\n    return [ obj ];\n  };\n  \n  // ----- removeFrom ----- //\n  \n  utils.removeFrom = function( ary, obj ) {\n    var index = ary.indexOf( obj );\n    if ( index != -1 ) {\n      ary.splice( index, 1 );\n    }\n  };\n  \n  // ----- getParent ----- //\n  \n  utils.getParent = function( elem, selector ) {\n    while ( elem.parentNode && elem != document.body ) {\n      elem = elem.parentNode;\n      if ( matchesSelector( elem, selector ) ) {\n        return elem;\n      }\n    }\n  };\n  \n  // ----- getQueryElement ----- //\n  \n  // use element as selector string\n  utils.getQueryElement = function( elem ) {\n    if ( typeof elem == 'string' ) {\n      return document.querySelector( elem );\n    }\n    return elem;\n  };\n  \n  // ----- handleEvent ----- //\n  \n  // enable .ontype to trigger from .addEventListener( elem, 'type' )\n  utils.handleEvent = function( event ) {\n    var method = 'on' + event.type;\n    if ( this[ method ] ) {\n      this[ method ]( event );\n    }\n  };\n  \n  // ----- filterFindElements ----- //\n  \n  utils.filterFindElements = function( elems, selector ) {\n    // make array of elems\n    elems = utils.makeArray( elems );\n    var ffElems = [];\n  \n    elems.forEach( function( elem ) {\n      // check that elem is an actual element\n      if ( !( elem instanceof HTMLElement ) ) {\n        return;\n      }\n      // add elem if no selector\n      if ( !selector ) {\n        ffElems.push( elem );\n        return;\n      }\n      // filter & find items if we have a selector\n      // filter\n      if ( matchesSelector( elem, selector ) ) {\n        ffElems.push( elem );\n      }\n      // find children\n      var childElems = elem.querySelectorAll( selector );\n      // concat childElems to filterFound array\n      for ( var i=0; i < childElems.length; i++ ) {\n        ffElems.push( childElems[i] );\n      }\n    });\n  \n    return ffElems;\n  };\n  \n  // ----- debounceMethod ----- //\n  \n  utils.debounceMethod = function( _class, methodName, threshold ) {\n    threshold = threshold || 100;\n    // original method\n    var method = _class.prototype[ methodName ];\n    var timeoutName = methodName + 'Timeout';\n  \n    _class.prototype[ methodName ] = function() {\n      var timeout = this[ timeoutName ];\n      clearTimeout( timeout );\n  \n      var args = arguments;\n      var _this = this;\n      this[ timeoutName ] = setTimeout( function() {\n        method.apply( _this, args );\n        delete _this[ timeoutName ];\n      }, threshold );\n    };\n  };\n  \n  // ----- docReady ----- //\n  \n  utils.docReady = function( callback ) {\n    var readyState = document.readyState;\n    if ( readyState == 'complete' || readyState == 'interactive' ) {\n      // do async to allow for other scripts to run. metafizzy/flickity#441\n      setTimeout( callback );\n    } else {\n      document.addEventListener( 'DOMContentLoaded', callback );\n    }\n  };\n  \n  // ----- htmlInit ----- //\n  \n  // http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\n  utils.toDashed = function( str ) {\n    return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n      return $1 + '-' + $2;\n    }).toLowerCase();\n  };\n  \n  var console = window.console;\n  /**\n   * allow user to initialize classes via [data-namespace] or .js-namespace class\n   * htmlInit( Widget, 'widgetName' )\n   * options are parsed from data-namespace-options\n   */\n  utils.htmlInit = function( WidgetClass, namespace ) {\n    utils.docReady( function() {\n      var dashedNamespace = utils.toDashed( namespace );\n      var dataAttr = 'data-' + dashedNamespace;\n      var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n      var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n      var elems = utils.makeArray( dataAttrElems )\n        .concat( utils.makeArray( jsDashElems ) );\n      var dataOptionsAttr = dataAttr + '-options';\n      var jQuery = window.jQuery;\n  \n      elems.forEach( function( elem ) {\n        var attr = elem.getAttribute( dataAttr ) ||\n          elem.getAttribute( dataOptionsAttr );\n        var options;\n        try {\n          options = attr && JSON.parse( attr );\n        } catch ( error ) {\n          // log error, do not initialize\n          if ( console ) {\n            console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n            ': ' + error );\n          }\n          return;\n        }\n        // initialize\n        var instance = new WidgetClass( elem, options );\n        // make available via $().data('namespace')\n        if ( jQuery ) {\n          jQuery.data( elem, namespace, instance );\n        }\n      });\n  \n    });\n  };\n  \n  // -----  ----- //\n  \n  return utils;\n  \n  }));\n  \n  // Flickity.Cell\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/cell',[\n        'get-size/get-size'\n      ], function( getSize ) {\n        return factory( window, getSize );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('get-size')\n      );\n    } else {\n      // browser global\n      window.Flickity = window.Flickity || {};\n      window.Flickity.Cell = factory(\n        window,\n        window.getSize\n      );\n    }\n  \n  }( window, function factory( window, getSize ) {\n  \n  \n  \n  function Cell( elem, parent ) {\n    this.element = elem;\n    this.parent = parent;\n  \n    this.create();\n  }\n  \n  var proto = Cell.prototype;\n  \n  proto.create = function() {\n    this.element.style.position = 'absolute';\n    this.element.setAttribute( 'aria-hidden', 'true' );\n    this.x = 0;\n    this.shift = 0;\n  };\n  \n  proto.destroy = function() {\n    // reset style\n    this.unselect();\n    this.element.style.position = '';\n    var side = this.parent.originSide;\n    this.element.style[ side ] = '';\n  };\n  \n  proto.getSize = function() {\n    this.size = getSize( this.element );\n  };\n  \n  proto.setPosition = function( x ) {\n    this.x = x;\n    this.updateTarget();\n    this.renderPosition( x );\n  };\n  \n  // setDefaultTarget v1 method, backwards compatibility, remove in v3\n  proto.updateTarget = proto.setDefaultTarget = function() {\n    var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\n    this.target = this.x + this.size[ marginProperty ] +\n      this.size.width * this.parent.cellAlign;\n  };\n  \n  proto.renderPosition = function( x ) {\n    // render position of cell with in slider\n    var side = this.parent.originSide;\n    this.element.style[ side ] = this.parent.getPositionValue( x );\n  };\n  \n  proto.select = function() {\n    this.element.classList.add('is-selected');\n    this.element.removeAttribute('aria-hidden');\n  };\n  \n  proto.unselect = function() {\n    this.element.classList.remove('is-selected');\n    this.element.setAttribute( 'aria-hidden', 'true' );\n  };\n  \n  /**\n   * @param {Integer} factor - 0, 1, or -1\n  **/\n  proto.wrapShift = function( shift ) {\n    this.shift = shift;\n    this.renderPosition( this.x + this.parent.slideableWidth * shift );\n  };\n  \n  proto.remove = function() {\n    this.element.parentNode.removeChild( this.element );\n  };\n  \n  return Cell;\n  \n  }));\n  \n  // slide\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/slide',factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory();\n    } else {\n      // browser global\n      window.Flickity = window.Flickity || {};\n      window.Flickity.Slide = factory();\n    }\n  \n  }( window, function factory() {\n  'use strict';\n  \n  function Slide( parent ) {\n    this.parent = parent;\n    this.isOriginLeft = parent.originSide == 'left';\n    this.cells = [];\n    this.outerWidth = 0;\n    this.height = 0;\n  }\n  \n  var proto = Slide.prototype;\n  \n  proto.addCell = function( cell ) {\n    this.cells.push( cell );\n    this.outerWidth += cell.size.outerWidth;\n    this.height = Math.max( cell.size.outerHeight, this.height );\n    // first cell stuff\n    if ( this.cells.length == 1 ) {\n      this.x = cell.x; // x comes from first cell\n      var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\n      this.firstMargin = cell.size[ beginMargin ];\n    }\n  };\n  \n  proto.updateTarget = function() {\n    var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\n    var lastCell = this.getLastCell();\n    var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\n    var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\n    this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\n  };\n  \n  proto.getLastCell = function() {\n    return this.cells[ this.cells.length - 1 ];\n  };\n  \n  proto.select = function() {\n    this.cells.forEach( function( cell ) {\n      cell.select();\n    });\n  };\n  \n  proto.unselect = function() {\n    this.cells.forEach( function( cell ) {\n      cell.unselect();\n    });\n  };\n  \n  proto.getCellElements = function() {\n    return this.cells.map( function( cell ) {\n      return cell.element;\n    });\n  };\n  \n  return Slide;\n  \n  }));\n  \n  // animate\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/animate',[\n        'fizzy-ui-utils/utils'\n      ], function( utils ) {\n        return factory( window, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      window.Flickity = window.Flickity || {};\n      window.Flickity.animatePrototype = factory(\n        window,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, utils ) {\n  \n  \n  \n  // -------------------------- animate -------------------------- //\n  \n  var proto = {};\n  \n  proto.startAnimation = function() {\n    if ( this.isAnimating ) {\n      return;\n    }\n  \n    this.isAnimating = true;\n    this.restingFrames = 0;\n    this.animate();\n  };\n  \n  proto.animate = function() {\n    this.applyDragForce();\n    this.applySelectedAttraction();\n  \n    var previousX = this.x;\n  \n    this.integratePhysics();\n    this.positionSlider();\n    this.settle( previousX );\n    // animate next frame\n    if ( this.isAnimating ) {\n      var _this = this;\n      requestAnimationFrame( function animateFrame() {\n        _this.animate();\n      });\n    }\n  };\n  \n  proto.positionSlider = function() {\n    var x = this.x;\n    // wrap position around\n    if ( this.options.wrapAround && this.cells.length > 1 ) {\n      x = utils.modulo( x, this.slideableWidth );\n      x = x - this.slideableWidth;\n      this.shiftWrapCells( x );\n    }\n  \n    this.setTranslateX( x, this.isAnimating );\n    this.dispatchScrollEvent();\n  };\n  \n  proto.setTranslateX = function( x, is3d ) {\n    x += this.cursorPosition;\n    // reverse if right-to-left and using transform\n    x = this.options.rightToLeft ? -x : x;\n    var translateX = this.getPositionValue( x );\n    // use 3D tranforms for hardware acceleration on iOS\n    // but use 2D when settled, for better font-rendering\n    this.slider.style.transform = is3d ?\n      'translate3d(' + translateX + ',0,0)' : 'translateX(' + translateX + ')';\n  };\n  \n  proto.dispatchScrollEvent = function() {\n    var firstSlide = this.slides[0];\n    if ( !firstSlide ) {\n      return;\n    }\n    var positionX = -this.x - firstSlide.target;\n    var progress = positionX / this.slidesWidth;\n    this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\n  };\n  \n  proto.positionSliderAtSelected = function() {\n    if ( !this.cells.length ) {\n      return;\n    }\n    this.x = -this.selectedSlide.target;\n    this.velocity = 0; // stop wobble\n    this.positionSlider();\n  };\n  \n  proto.getPositionValue = function( position ) {\n    if ( this.options.percentPosition ) {\n      // percent position, round to 2 digits, like 12.34%\n      return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\n    } else {\n      // pixel positioning\n      return Math.round( position ) + 'px';\n    }\n  };\n  \n  proto.settle = function( previousX ) {\n    // keep track of frames where x hasn't moved\n    if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\n      this.restingFrames++;\n    }\n    // stop animating if resting for 3 or more frames\n    if ( this.restingFrames > 2 ) {\n      this.isAnimating = false;\n      delete this.isFreeScrolling;\n      // render position with translateX when settled\n      this.positionSlider();\n      this.dispatchEvent( 'settle', null, [ this.selectedIndex ] );\n    }\n  };\n  \n  proto.shiftWrapCells = function( x ) {\n    // shift before cells\n    var beforeGap = this.cursorPosition + x;\n    this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\n    // shift after cells\n    var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\n    this._shiftCells( this.afterShiftCells, afterGap, 1 );\n  };\n  \n  proto._shiftCells = function( cells, gap, shift ) {\n    for ( var i=0; i < cells.length; i++ ) {\n      var cell = cells[i];\n      var cellShift = gap > 0 ? shift : 0;\n      cell.wrapShift( cellShift );\n      gap -= cell.size.outerWidth;\n    }\n  };\n  \n  proto._unshiftCells = function( cells ) {\n    if ( !cells || !cells.length ) {\n      return;\n    }\n    for ( var i=0; i < cells.length; i++ ) {\n      cells[i].wrapShift( 0 );\n    }\n  };\n  \n  // -------------------------- physics -------------------------- //\n  \n  proto.integratePhysics = function() {\n    this.x += this.velocity;\n    this.velocity *= this.getFrictionFactor();\n  };\n  \n  proto.applyForce = function( force ) {\n    this.velocity += force;\n  };\n  \n  proto.getFrictionFactor = function() {\n    return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\n  };\n  \n  proto.getRestingPosition = function() {\n    // my thanks to Steven Wittens, who simplified this math greatly\n    return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\n  };\n  \n  proto.applyDragForce = function() {\n    if ( !this.isDraggable || !this.isPointerDown ) {\n      return;\n    }\n    // change the position to drag position by applying force\n    var dragVelocity = this.dragX - this.x;\n    var dragForce = dragVelocity - this.velocity;\n    this.applyForce( dragForce );\n  };\n  \n  proto.applySelectedAttraction = function() {\n    // do not attract if pointer down or no slides\n    var dragDown = this.isDraggable && this.isPointerDown;\n    if ( dragDown || this.isFreeScrolling || !this.slides.length ) {\n      return;\n    }\n    var distance = this.selectedSlide.target * -1 - this.x;\n    var force = distance * this.options.selectedAttraction;\n    this.applyForce( force );\n  };\n  \n  return proto;\n  \n  }));\n  \n  // Flickity main\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/flickity',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './cell',\n        './slide',\n        './animate'\n      ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\n        return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('ev-emitter'),\n        require('get-size'),\n        require('fizzy-ui-utils'),\n        require('./cell'),\n        require('./slide'),\n        require('./animate')\n      );\n    } else {\n      // browser global\n      var _Flickity = window.Flickity;\n  \n      window.Flickity = factory(\n        window,\n        window.EvEmitter,\n        window.getSize,\n        window.fizzyUIUtils,\n        _Flickity.Cell,\n        _Flickity.Slide,\n        _Flickity.animatePrototype\n      );\n    }\n  \n  }( window, function factory( window, EvEmitter, getSize,\n    utils, Cell, Slide, animatePrototype ) {\n  \n  \n  \n  // vars\n  var jQuery = window.jQuery;\n  var getComputedStyle = window.getComputedStyle;\n  var console = window.console;\n  \n  function moveElements( elems, toElem ) {\n    elems = utils.makeArray( elems );\n    while ( elems.length ) {\n      toElem.appendChild( elems.shift() );\n    }\n  }\n  \n  // -------------------------- Flickity -------------------------- //\n  \n  // globally unique identifiers\n  var GUID = 0;\n  // internal store of all Flickity intances\n  var instances = {};\n  \n  function Flickity( element, options ) {\n    var queryElement = utils.getQueryElement( element );\n    if ( !queryElement ) {\n      if ( console ) {\n        console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\n      }\n      return;\n    }\n    this.element = queryElement;\n    // do not initialize twice on same element\n    if ( this.element.flickityGUID ) {\n      var instance = instances[ this.element.flickityGUID ];\n      instance.option( options );\n      return instance;\n    }\n  \n    // add jQuery\n    if ( jQuery ) {\n      this.$element = jQuery( this.element );\n    }\n    // options\n    this.options = utils.extend( {}, this.constructor.defaults );\n    this.option( options );\n  \n    // kick things off\n    this._create();\n  }\n  \n  Flickity.defaults = {\n    accessibility: true,\n    // adaptiveHeight: false,\n    cellAlign: 'center',\n    // cellSelector: undefined,\n    // contain: false,\n    freeScrollFriction: 0.075, // friction when free-scrolling\n    friction: 0.28, // friction when selecting\n    namespaceJQueryEvents: true,\n    // initialIndex: 0,\n    percentPosition: true,\n    resize: true,\n    selectedAttraction: 0.025,\n    setGallerySize: true\n    // watchCSS: false,\n    // wrapAround: false\n  };\n  \n  // hash of methods triggered on _create()\n  Flickity.createMethods = [];\n  \n  var proto = Flickity.prototype;\n  // inherit EventEmitter\n  utils.extend( proto, EvEmitter.prototype );\n  \n  proto._create = function() {\n    // add id for Flickity.data\n    var id = this.guid = ++GUID;\n    this.element.flickityGUID = id; // expando\n    instances[ id ] = this; // associate via id\n    // initial properties\n    this.selectedIndex = 0;\n    // how many frames slider has been in same position\n    this.restingFrames = 0;\n    // initial physics properties\n    this.x = 0;\n    this.velocity = 0;\n    this.originSide = this.options.rightToLeft ? 'right' : 'left';\n    // create viewport & slider\n    this.viewport = document.createElement('div');\n    this.viewport.className = 'flickity-viewport';\n    this._createSlider();\n  \n    if ( this.options.resize || this.options.watchCSS ) {\n      window.addEventListener( 'resize', this );\n    }\n  \n    // add listeners from on option\n    for ( var eventName in this.options.on ) {\n      var listener = this.options.on[ eventName ];\n      this.on( eventName, listener );\n    }\n  \n    Flickity.createMethods.forEach( function( method ) {\n      this[ method ]();\n    }, this );\n  \n    if ( this.options.watchCSS ) {\n      this.watchCSS();\n    } else {\n      this.activate();\n    }\n  \n  };\n  \n  /**\n   * set options\n   * @param {Object} opts\n   */\n  proto.option = function( opts ) {\n    utils.extend( this.options, opts );\n  };\n  \n  proto.activate = function() {\n    if ( this.isActive ) {\n      return;\n    }\n    this.isActive = true;\n    this.element.classList.add('flickity-enabled');\n    if ( this.options.rightToLeft ) {\n      this.element.classList.add('flickity-rtl');\n    }\n  \n    this.getSize();\n    // move initial cell elements so they can be loaded as cells\n    var cellElems = this._filterFindCellElements( this.element.children );\n    moveElements( cellElems, this.slider );\n    this.viewport.appendChild( this.slider );\n    this.element.appendChild( this.viewport );\n    // get cells from children\n    this.reloadCells();\n  \n    if ( this.options.accessibility ) {\n      // allow element to focusable\n      this.element.tabIndex = 0;\n      // listen for key presses\n      this.element.addEventListener( 'keydown', this );\n    }\n  \n    this.emitEvent('activate');\n    this.selectInitialIndex();\n    // flag for initial activation, for using initialIndex\n    this.isInitActivated = true;\n    // ready event. #493\n    this.dispatchEvent('ready');\n  };\n  \n  // slider positions the cells\n  proto._createSlider = function() {\n    // slider element does all the positioning\n    var slider = document.createElement('div');\n    slider.className = 'flickity-slider';\n    slider.style[ this.originSide ] = 0;\n    this.slider = slider;\n  };\n  \n  proto._filterFindCellElements = function( elems ) {\n    return utils.filterFindElements( elems, this.options.cellSelector );\n  };\n  \n  // goes through all children\n  proto.reloadCells = function() {\n    // collection of item elements\n    this.cells = this._makeCells( this.slider.children );\n    this.positionCells();\n    this._getWrapShiftCells();\n    this.setGallerySize();\n  };\n  \n  /**\n   * turn elements into Flickity.Cells\n   * @param {Array or NodeList or HTMLElement} elems\n   * @returns {Array} items - collection of new Flickity Cells\n   */\n  proto._makeCells = function( elems ) {\n    var cellElems = this._filterFindCellElements( elems );\n  \n    // create new Flickity for collection\n    var cells = cellElems.map( function( cellElem ) {\n      return new Cell( cellElem, this );\n    }, this );\n  \n    return cells;\n  };\n  \n  proto.getLastCell = function() {\n    return this.cells[ this.cells.length - 1 ];\n  };\n  \n  proto.getLastSlide = function() {\n    return this.slides[ this.slides.length - 1 ];\n  };\n  \n  // positions all cells\n  proto.positionCells = function() {\n    // size all cells\n    this._sizeCells( this.cells );\n    // position all cells\n    this._positionCells( 0 );\n  };\n  \n  /**\n   * position certain cells\n   * @param {Integer} index - which cell to start with\n   */\n  proto._positionCells = function( index ) {\n    index = index || 0;\n    // also measure maxCellHeight\n    // start 0 if positioning all cells\n    this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\n    var cellX = 0;\n    // get cellX\n    if ( index > 0 ) {\n      var startCell = this.cells[ index - 1 ];\n      cellX = startCell.x + startCell.size.outerWidth;\n    }\n    var len = this.cells.length;\n    for ( var i=index; i < len; i++ ) {\n      var cell = this.cells[i];\n      cell.setPosition( cellX );\n      cellX += cell.size.outerWidth;\n      this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\n    }\n    // keep track of cellX for wrap-around\n    this.slideableWidth = cellX;\n    // slides\n    this.updateSlides();\n    // contain slides target\n    this._containSlides();\n    // update slidesWidth\n    this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\n  };\n  \n  /**\n   * cell.getSize() on multiple cells\n   * @param {Array} cells\n   */\n  proto._sizeCells = function( cells ) {\n    cells.forEach( function( cell ) {\n      cell.getSize();\n    });\n  };\n  \n  // --------------------------  -------------------------- //\n  \n  proto.updateSlides = function() {\n    this.slides = [];\n    if ( !this.cells.length ) {\n      return;\n    }\n  \n    var slide = new Slide( this );\n    this.slides.push( slide );\n    var isOriginLeft = this.originSide == 'left';\n    var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\n  \n    var canCellFit = this._getCanCellFit();\n  \n    this.cells.forEach( function( cell, i ) {\n      // just add cell if first cell in slide\n      if ( !slide.cells.length ) {\n        slide.addCell( cell );\n        return;\n      }\n  \n      var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\n        ( cell.size.outerWidth - cell.size[ nextMargin ] );\n  \n      if ( canCellFit.call( this, i, slideWidth ) ) {\n        slide.addCell( cell );\n      } else {\n        // doesn't fit, new slide\n        slide.updateTarget();\n  \n        slide = new Slide( this );\n        this.slides.push( slide );\n        slide.addCell( cell );\n      }\n    }, this );\n    // last slide\n    slide.updateTarget();\n    // update .selectedSlide\n    this.updateSelectedSlide();\n  };\n  \n  proto._getCanCellFit = function() {\n    var groupCells = this.options.groupCells;\n    if ( !groupCells ) {\n      return function() {\n        return false;\n      };\n    } else if ( typeof groupCells == 'number' ) {\n      // group by number. 3 -> [0,1,2], [3,4,5], ...\n      var number = parseInt( groupCells, 10 );\n      return function( i ) {\n        return ( i % number ) !== 0;\n      };\n    }\n    // default, group by width of slide\n    // parse '75%\n    var percentMatch = typeof groupCells == 'string' &&\n      groupCells.match(/^(\\d+)%$/);\n    var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\n    return function( i, slideWidth ) {\n      return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\n    };\n  };\n  \n  // alias _init for jQuery plugin .flickity()\n  proto._init =\n  proto.reposition = function() {\n    this.positionCells();\n    this.positionSliderAtSelected();\n  };\n  \n  proto.getSize = function() {\n    this.size = getSize( this.element );\n    this.setCellAlign();\n    this.cursorPosition = this.size.innerWidth * this.cellAlign;\n  };\n  \n  var cellAlignShorthands = {\n    // cell align, then based on origin side\n    center: {\n      left: 0.5,\n      right: 0.5\n    },\n    left: {\n      left: 0,\n      right: 1\n    },\n    right: {\n      right: 0,\n      left: 1\n    }\n  };\n  \n  proto.setCellAlign = function() {\n    var shorthand = cellAlignShorthands[ this.options.cellAlign ];\n    this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\n  };\n  \n  proto.setGallerySize = function() {\n    if ( this.options.setGallerySize ) {\n      var height = this.options.adaptiveHeight && this.selectedSlide ?\n        this.selectedSlide.height : this.maxCellHeight;\n      this.viewport.style.height = height + 'px';\n    }\n  };\n  \n  proto._getWrapShiftCells = function() {\n    // only for wrap-around\n    if ( !this.options.wrapAround ) {\n      return;\n    }\n    // unshift previous cells\n    this._unshiftCells( this.beforeShiftCells );\n    this._unshiftCells( this.afterShiftCells );\n    // get before cells\n    // initial gap\n    var gapX = this.cursorPosition;\n    var cellIndex = this.cells.length - 1;\n    this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\n    // get after cells\n    // ending gap between last cell and end of gallery viewport\n    gapX = this.size.innerWidth - this.cursorPosition;\n    // start cloning at first cell, working forwards\n    this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\n  };\n  \n  proto._getGapCells = function( gapX, cellIndex, increment ) {\n    // keep adding cells until the cover the initial gap\n    var cells = [];\n    while ( gapX > 0 ) {\n      var cell = this.cells[ cellIndex ];\n      if ( !cell ) {\n        break;\n      }\n      cells.push( cell );\n      cellIndex += increment;\n      gapX -= cell.size.outerWidth;\n    }\n    return cells;\n  };\n  \n  // ----- contain ----- //\n  \n  // contain cell targets so no excess sliding\n  proto._containSlides = function() {\n    if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\n      return;\n    }\n    var isRightToLeft = this.options.rightToLeft;\n    var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\n    var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\n    var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\n    // content is less than gallery size\n    var isContentSmaller = contentWidth < this.size.innerWidth;\n    // bounds\n    var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\n    var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\n    // contain each cell target\n    this.slides.forEach( function( slide ) {\n      if ( isContentSmaller ) {\n        // all cells fit inside gallery\n        slide.target = contentWidth * this.cellAlign;\n      } else {\n        // contain to bounds\n        slide.target = Math.max( slide.target, beginBound );\n        slide.target = Math.min( slide.target, endBound );\n      }\n    }, this );\n  };\n  \n  // -----  ----- //\n  \n  /**\n   * emits events via eventEmitter and jQuery events\n   * @param {String} type - name of event\n   * @param {Event} event - original event\n   * @param {Array} args - extra arguments\n   */\n  proto.dispatchEvent = function( type, event, args ) {\n    var emitArgs = event ? [ event ].concat( args ) : args;\n    this.emitEvent( type, emitArgs );\n  \n    if ( jQuery && this.$element ) {\n      // default trigger with type if no event\n      type += this.options.namespaceJQueryEvents ? '.flickity' : '';\n      var $event = type;\n      if ( event ) {\n        // create jQuery event\n        var jQEvent = jQuery.Event( event );\n        jQEvent.type = type;\n        $event = jQEvent;\n      }\n      this.$element.trigger( $event, args );\n    }\n  };\n  \n  // -------------------------- select -------------------------- //\n  \n  /**\n   * @param {Integer} index - index of the slide\n   * @param {Boolean} isWrap - will wrap-around to last/first if at the end\n   * @param {Boolean} isInstant - will immediately set position at selected cell\n   */\n  proto.select = function( index, isWrap, isInstant ) {\n    if ( !this.isActive ) {\n      return;\n    }\n    index = parseInt( index, 10 );\n    this._wrapSelect( index );\n  \n    if ( this.options.wrapAround || isWrap ) {\n      index = utils.modulo( index, this.slides.length );\n    }\n    // bail if invalid index\n    if ( !this.slides[ index ] ) {\n      return;\n    }\n    var prevIndex = this.selectedIndex;\n    this.selectedIndex = index;\n    this.updateSelectedSlide();\n    if ( isInstant ) {\n      this.positionSliderAtSelected();\n    } else {\n      this.startAnimation();\n    }\n    if ( this.options.adaptiveHeight ) {\n      this.setGallerySize();\n    }\n    // events\n    this.dispatchEvent( 'select', null, [ index ] );\n    // change event if new index\n    if ( index != prevIndex ) {\n      this.dispatchEvent( 'change', null, [ index ] );\n    }\n    // old v1 event name, remove in v3\n    this.dispatchEvent('cellSelect');\n  };\n  \n  // wraps position for wrapAround, to move to closest slide. #113\n  proto._wrapSelect = function( index ) {\n    var len = this.slides.length;\n    var isWrapping = this.options.wrapAround && len > 1;\n    if ( !isWrapping ) {\n      return index;\n    }\n    var wrapIndex = utils.modulo( index, len );\n    // go to shortest\n    var delta = Math.abs( wrapIndex - this.selectedIndex );\n    var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\n    var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\n    if ( !this.isDragSelect && backWrapDelta < delta ) {\n      index += len;\n    } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\n      index -= len;\n    }\n    // wrap position so slider is within normal area\n    if ( index < 0 ) {\n      this.x -= this.slideableWidth;\n    } else if ( index >= len ) {\n      this.x += this.slideableWidth;\n    }\n  };\n  \n  proto.previous = function( isWrap, isInstant ) {\n    this.select( this.selectedIndex - 1, isWrap, isInstant );\n  };\n  \n  proto.next = function( isWrap, isInstant ) {\n    this.select( this.selectedIndex + 1, isWrap, isInstant );\n  };\n  \n  proto.updateSelectedSlide = function() {\n    var slide = this.slides[ this.selectedIndex ];\n    // selectedIndex could be outside of slides, if triggered before resize()\n    if ( !slide ) {\n      return;\n    }\n    // unselect previous selected slide\n    this.unselectSelectedSlide();\n    // update new selected slide\n    this.selectedSlide = slide;\n    slide.select();\n    this.selectedCells = slide.cells;\n    this.selectedElements = slide.getCellElements();\n    // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\n    // Remove in v3?\n    this.selectedCell = slide.cells[0];\n    this.selectedElement = this.selectedElements[0];\n  };\n  \n  proto.unselectSelectedSlide = function() {\n    if ( this.selectedSlide ) {\n      this.selectedSlide.unselect();\n    }\n  };\n  \n  proto.selectInitialIndex = function() {\n    var initialIndex = this.options.initialIndex;\n    // already activated, select previous selectedIndex\n    if ( this.isInitActivated ) {\n      this.select( this.selectedIndex, false, true );\n      return;\n    }\n    // select with selector string\n    if ( initialIndex && typeof initialIndex == 'string' ) {\n      var cell = this.queryCell( initialIndex );\n      if ( cell ) {\n        this.selectCell( initialIndex, false, true );\n        return;\n      }\n    }\n  \n    var index = 0;\n    // select with number\n    if ( initialIndex && this.slides[ initialIndex ] ) {\n      index = initialIndex;\n    }\n    // select instantly\n    this.select( index, false, true );\n  };\n  \n  /**\n   * select slide from number or cell element\n   * @param {Element or Number} elem\n   */\n  proto.selectCell = function( value, isWrap, isInstant ) {\n    // get cell\n    var cell = this.queryCell( value );\n    if ( !cell ) {\n      return;\n    }\n  \n    var index = this.getCellSlideIndex( cell );\n    this.select( index, isWrap, isInstant );\n  };\n  \n  proto.getCellSlideIndex = function( cell ) {\n    // get index of slides that has cell\n    for ( var i=0; i < this.slides.length; i++ ) {\n      var slide = this.slides[i];\n      var index = slide.cells.indexOf( cell );\n      if ( index != -1 ) {\n        return i;\n      }\n    }\n  };\n  \n  // -------------------------- get cells -------------------------- //\n  \n  /**\n   * get Flickity.Cell, given an Element\n   * @param {Element} elem\n   * @returns {Flickity.Cell} item\n   */\n  proto.getCell = function( elem ) {\n    // loop through cells to get the one that matches\n    for ( var i=0; i < this.cells.length; i++ ) {\n      var cell = this.cells[i];\n      if ( cell.element == elem ) {\n        return cell;\n      }\n    }\n  };\n  \n  /**\n   * get collection of Flickity.Cells, given Elements\n   * @param {Element, Array, NodeList} elems\n   * @returns {Array} cells - Flickity.Cells\n   */\n  proto.getCells = function( elems ) {\n    elems = utils.makeArray( elems );\n    var cells = [];\n    elems.forEach( function( elem ) {\n      var cell = this.getCell( elem );\n      if ( cell ) {\n        cells.push( cell );\n      }\n    }, this );\n    return cells;\n  };\n  \n  /**\n   * get cell elements\n   * @returns {Array} cellElems\n   */\n  proto.getCellElements = function() {\n    return this.cells.map( function( cell ) {\n      return cell.element;\n    });\n  };\n  \n  /**\n   * get parent cell from an element\n   * @param {Element} elem\n   * @returns {Flickit.Cell} cell\n   */\n  proto.getParentCell = function( elem ) {\n    // first check if elem is cell\n    var cell = this.getCell( elem );\n    if ( cell ) {\n      return cell;\n    }\n    // try to get parent cell elem\n    elem = utils.getParent( elem, '.flickity-slider > *' );\n    return this.getCell( elem );\n  };\n  \n  /**\n   * get cells adjacent to a slide\n   * @param {Integer} adjCount - number of adjacent slides\n   * @param {Integer} index - index of slide to start\n   * @returns {Array} cells - array of Flickity.Cells\n   */\n  proto.getAdjacentCellElements = function( adjCount, index ) {\n    if ( !adjCount ) {\n      return this.selectedSlide.getCellElements();\n    }\n    index = index === undefined ? this.selectedIndex : index;\n  \n    var len = this.slides.length;\n    if ( 1 + ( adjCount * 2 ) >= len ) {\n      return this.getCellElements();\n    }\n  \n    var cellElems = [];\n    for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\n      var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\n      var slide = this.slides[ slideIndex ];\n      if ( slide ) {\n        cellElems = cellElems.concat( slide.getCellElements() );\n      }\n    }\n    return cellElems;\n  };\n  \n  /**\n   * select slide from number or cell element\n   * @param {Element, Selector String, or Number} selector\n   */\n  proto.queryCell = function( selector ) {\n    if ( typeof selector == 'number' ) {\n      // use number as index\n      return this.cells[ selector ];\n    }\n    if ( typeof selector == 'string' ) {\n      // do not select invalid selectors from hash: #123, #/. #791\n      if ( selector.match(/^[#\\.]?[\\d\\/]/) ) {\n        return;\n      }\n      // use string as selector, get element\n      selector = this.element.querySelector( selector );\n    }\n    // get cell from element\n    return this.getCell( selector );\n  };\n  \n  // -------------------------- events -------------------------- //\n  \n  proto.uiChange = function() {\n    this.emitEvent('uiChange');\n  };\n  \n  // keep focus on element when child UI elements are clicked\n  proto.childUIPointerDown = function( event ) {\n    // HACK iOS does not allow touch events to bubble up?!\n    if ( event.type != 'touchstart' ) {\n      event.preventDefault();\n    }\n    this.focus();\n  };\n  \n  // ----- resize ----- //\n  \n  proto.onresize = function() {\n    this.watchCSS();\n    this.resize();\n  };\n  \n  utils.debounceMethod( Flickity, 'onresize', 150 );\n  \n  proto.resize = function() {\n    if ( !this.isActive ) {\n      return;\n    }\n    this.getSize();\n    // wrap values\n    if ( this.options.wrapAround ) {\n      this.x = utils.modulo( this.x, this.slideableWidth );\n    }\n    this.positionCells();\n    this._getWrapShiftCells();\n    this.setGallerySize();\n    this.emitEvent('resize');\n    // update selected index for group slides, instant\n    // TODO: position can be lost between groups of various numbers\n    var selectedElement = this.selectedElements && this.selectedElements[0];\n    this.selectCell( selectedElement, false, true );\n  };\n  \n  // watches the :after property, activates/deactivates\n  proto.watchCSS = function() {\n    var watchOption = this.options.watchCSS;\n    if ( !watchOption ) {\n      return;\n    }\n  \n    var afterContent = getComputedStyle( this.element, ':after' ).content;\n    // activate if :after { content: 'flickity' }\n    if ( afterContent.indexOf('flickity') != -1 ) {\n      this.activate();\n    } else {\n      this.deactivate();\n    }\n  };\n  \n  // ----- keydown ----- //\n  \n  // go previous/next if left/right keys pressed\n  proto.onkeydown = function( event ) {\n    // only work if element is in focus\n    var isNotFocused = document.activeElement && document.activeElement != this.element;\n    if ( !this.options.accessibility ||isNotFocused ) {\n      return;\n    }\n  \n    var handler = Flickity.keyboardHandlers[ event.keyCode ];\n    if ( handler ) {\n      handler.call( this );\n    }\n  };\n  \n  Flickity.keyboardHandlers = {\n    // left arrow\n    37: function() {\n      var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\n      this.uiChange();\n      this[ leftMethod ]();\n    },\n    // right arrow\n    39: function() {\n      var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\n      this.uiChange();\n      this[ rightMethod ]();\n    },\n  };\n  \n  // ----- focus ----- //\n  \n  proto.focus = function() {\n    // TODO remove scrollTo once focus options gets more support\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus#Browser_compatibility\n    var prevScrollY = window.pageYOffset;\n    this.element.focus({ preventScroll: true });\n    // hack to fix scroll jump after focus, #76\n    if ( window.pageYOffset != prevScrollY ) {\n      window.scrollTo( window.pageXOffset, prevScrollY );\n    }\n  };\n  \n  // -------------------------- destroy -------------------------- //\n  \n  // deactivate all Flickity functionality, but keep stuff available\n  proto.deactivate = function() {\n    if ( !this.isActive ) {\n      return;\n    }\n    this.element.classList.remove('flickity-enabled');\n    this.element.classList.remove('flickity-rtl');\n    this.unselectSelectedSlide();\n    // destroy cells\n    this.cells.forEach( function( cell ) {\n      cell.destroy();\n    });\n    this.element.removeChild( this.viewport );\n    // move child elements back into element\n    moveElements( this.slider.children, this.element );\n    if ( this.options.accessibility ) {\n      this.element.removeAttribute('tabIndex');\n      this.element.removeEventListener( 'keydown', this );\n    }\n    // set flags\n    this.isActive = false;\n    this.emitEvent('deactivate');\n  };\n  \n  proto.destroy = function() {\n    this.deactivate();\n    window.removeEventListener( 'resize', this );\n    this.allOff();\n    this.emitEvent('destroy');\n    if ( jQuery && this.$element ) {\n      jQuery.removeData( this.element, 'flickity' );\n    }\n    delete this.element.flickityGUID;\n    delete instances[ this.guid ];\n  };\n  \n  // -------------------------- prototype -------------------------- //\n  \n  utils.extend( proto, animatePrototype );\n  \n  // -------------------------- extras -------------------------- //\n  \n  /**\n   * get Flickity instance from element\n   * @param {Element} elem\n   * @returns {Flickity}\n   */\n  Flickity.data = function( elem ) {\n    elem = utils.getQueryElement( elem );\n    var id = elem && elem.flickityGUID;\n    return id && instances[ id ];\n  };\n  \n  utils.htmlInit( Flickity, 'flickity' );\n  \n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( 'flickity', Flickity );\n  }\n  \n  // set internal jQuery, for Webpack + jQuery v3, #478\n  Flickity.setJQuery = function( jq ) {\n    jQuery = jq;\n  };\n  \n  Flickity.Cell = Cell;\n  Flickity.Slide = Slide;\n  \n  return Flickity;\n  \n  }));\n  \n  /*!\n   * Unipointer v2.3.0\n   * base class for doing one thing with pointer event\n   * MIT license\n   */\n  \n  /*jshint browser: true, undef: true, unused: true, strict: true */\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */ /*global define, module, require */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'unipointer/unipointer',[\n        'ev-emitter/ev-emitter'\n      ], function( EvEmitter ) {\n        return factory( window, EvEmitter );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('ev-emitter')\n      );\n    } else {\n      // browser global\n      window.Unipointer = factory(\n        window,\n        window.EvEmitter\n      );\n    }\n  \n  }( window, function factory( window, EvEmitter ) {\n  \n  \n  \n  function noop() {}\n  \n  function Unipointer() {}\n  \n  // inherit EvEmitter\n  var proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\n  \n  proto.bindStartEvent = function( elem ) {\n    this._bindStartEvent( elem, true );\n  };\n  \n  proto.unbindStartEvent = function( elem ) {\n    this._bindStartEvent( elem, false );\n  };\n  \n  /**\n   * Add or remove start event\n   * @param {Boolean} isAdd - remove if falsey\n   */\n  proto._bindStartEvent = function( elem, isAdd ) {\n    // munge isAdd, default to true\n    isAdd = isAdd === undefined ? true : isAdd;\n    var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener';\n  \n    // default to mouse events\n    var startEvent = 'mousedown';\n    if ( window.PointerEvent ) {\n      // Pointer Events\n      startEvent = 'pointerdown';\n    } else if ( 'ontouchstart' in window ) {\n      // Touch Events. iOS Safari\n      startEvent = 'touchstart';\n    }\n    elem[ bindMethod ]( startEvent, this );\n  };\n  \n  // trigger handler methods for events\n  proto.handleEvent = function( event ) {\n    var method = 'on' + event.type;\n    if ( this[ method ] ) {\n      this[ method ]( event );\n    }\n  };\n  \n  // returns the touch that we're keeping track of\n  proto.getTouch = function( touches ) {\n    for ( var i=0; i < touches.length; i++ ) {\n      var touch = touches[i];\n      if ( touch.identifier == this.pointerIdentifier ) {\n        return touch;\n      }\n    }\n  };\n  \n  // ----- start event ----- //\n  \n  proto.onmousedown = function( event ) {\n    // dismiss clicks from right or middle buttons\n    var button = event.button;\n    if ( button && ( button !== 0 && button !== 1 ) ) {\n      return;\n    }\n    this._pointerDown( event, event );\n  };\n  \n  proto.ontouchstart = function( event ) {\n    this._pointerDown( event, event.changedTouches[0] );\n  };\n  \n  proto.onpointerdown = function( event ) {\n    this._pointerDown( event, event );\n  };\n  \n  /**\n   * pointer start\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   */\n  proto._pointerDown = function( event, pointer ) {\n    // dismiss right click and other pointers\n    // button = 0 is okay, 1-4 not\n    if ( event.button || this.isPointerDown ) {\n      return;\n    }\n  \n    this.isPointerDown = true;\n    // save pointer identifier to match up touch events\n    this.pointerIdentifier = pointer.pointerId !== undefined ?\n      // pointerId for pointer events, touch.indentifier for touch events\n      pointer.pointerId : pointer.identifier;\n  \n    this.pointerDown( event, pointer );\n  };\n  \n  proto.pointerDown = function( event, pointer ) {\n    this._bindPostStartEvents( event );\n    this.emitEvent( 'pointerDown', [ event, pointer ] );\n  };\n  \n  // hash of events to be bound after start event\n  var postStartEvents = {\n    mousedown: [ 'mousemove', 'mouseup' ],\n    touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\n    pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\n  };\n  \n  proto._bindPostStartEvents = function( event ) {\n    if ( !event ) {\n      return;\n    }\n    // get proper events to match start event\n    var events = postStartEvents[ event.type ];\n    // bind events to node\n    events.forEach( function( eventName ) {\n      window.addEventListener( eventName, this );\n    }, this );\n    // save these arguments\n    this._boundPointerEvents = events;\n  };\n  \n  proto._unbindPostStartEvents = function() {\n    // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\n    if ( !this._boundPointerEvents ) {\n      return;\n    }\n    this._boundPointerEvents.forEach( function( eventName ) {\n      window.removeEventListener( eventName, this );\n    }, this );\n  \n    delete this._boundPointerEvents;\n  };\n  \n  // ----- move event ----- //\n  \n  proto.onmousemove = function( event ) {\n    this._pointerMove( event, event );\n  };\n  \n  proto.onpointermove = function( event ) {\n    if ( event.pointerId == this.pointerIdentifier ) {\n      this._pointerMove( event, event );\n    }\n  };\n  \n  proto.ontouchmove = function( event ) {\n    var touch = this.getTouch( event.changedTouches );\n    if ( touch ) {\n      this._pointerMove( event, touch );\n    }\n  };\n  \n  /**\n   * pointer move\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n  proto._pointerMove = function( event, pointer ) {\n    this.pointerMove( event, pointer );\n  };\n  \n  // public\n  proto.pointerMove = function( event, pointer ) {\n    this.emitEvent( 'pointerMove', [ event, pointer ] );\n  };\n  \n  // ----- end event ----- //\n  \n  \n  proto.onmouseup = function( event ) {\n    this._pointerUp( event, event );\n  };\n  \n  proto.onpointerup = function( event ) {\n    if ( event.pointerId == this.pointerIdentifier ) {\n      this._pointerUp( event, event );\n    }\n  };\n  \n  proto.ontouchend = function( event ) {\n    var touch = this.getTouch( event.changedTouches );\n    if ( touch ) {\n      this._pointerUp( event, touch );\n    }\n  };\n  \n  /**\n   * pointer up\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n  proto._pointerUp = function( event, pointer ) {\n    this._pointerDone();\n    this.pointerUp( event, pointer );\n  };\n  \n  // public\n  proto.pointerUp = function( event, pointer ) {\n    this.emitEvent( 'pointerUp', [ event, pointer ] );\n  };\n  \n  // ----- pointer done ----- //\n  \n  // triggered on pointer up & pointer cancel\n  proto._pointerDone = function() {\n    this._pointerReset();\n    this._unbindPostStartEvents();\n    this.pointerDone();\n  };\n  \n  proto._pointerReset = function() {\n    // reset properties\n    this.isPointerDown = false;\n    delete this.pointerIdentifier;\n  };\n  \n  proto.pointerDone = noop;\n  \n  // ----- pointer cancel ----- //\n  \n  proto.onpointercancel = function( event ) {\n    if ( event.pointerId == this.pointerIdentifier ) {\n      this._pointerCancel( event, event );\n    }\n  };\n  \n  proto.ontouchcancel = function( event ) {\n    var touch = this.getTouch( event.changedTouches );\n    if ( touch ) {\n      this._pointerCancel( event, touch );\n    }\n  };\n  \n  /**\n   * pointer cancel\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   * @private\n   */\n  proto._pointerCancel = function( event, pointer ) {\n    this._pointerDone();\n    this.pointerCancel( event, pointer );\n  };\n  \n  // public\n  proto.pointerCancel = function( event, pointer ) {\n    this.emitEvent( 'pointerCancel', [ event, pointer ] );\n  };\n  \n  // -----  ----- //\n  \n  // utility function for getting x/y coords from event\n  Unipointer.getPointerPoint = function( pointer ) {\n    return {\n      x: pointer.pageX,\n      y: pointer.pageY\n    };\n  };\n  \n  // -----  ----- //\n  \n  return Unipointer;\n  \n  }));\n  \n  /*!\n   * Unidragger v2.3.0\n   * Draggable base class\n   * MIT license\n   */\n  \n  /*jshint browser: true, unused: true, undef: true, strict: true */\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /*jshint strict: false */ /*globals define, module, require */\n  \n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'unidragger/unidragger',[\n        'unipointer/unipointer'\n      ], function( Unipointer ) {\n        return factory( window, Unipointer );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('unipointer')\n      );\n    } else {\n      // browser global\n      window.Unidragger = factory(\n        window,\n        window.Unipointer\n      );\n    }\n  \n  }( window, function factory( window, Unipointer ) {\n  \n  \n  \n  // -------------------------- Unidragger -------------------------- //\n  \n  function Unidragger() {}\n  \n  // inherit Unipointer & EvEmitter\n  var proto = Unidragger.prototype = Object.create( Unipointer.prototype );\n  \n  // ----- bind start ----- //\n  \n  proto.bindHandles = function() {\n    this._bindHandles( true );\n  };\n  \n  proto.unbindHandles = function() {\n    this._bindHandles( false );\n  };\n  \n  /**\n   * Add or remove start event\n   * @param {Boolean} isAdd\n   */\n  proto._bindHandles = function( isAdd ) {\n    // munge isAdd, default to true\n    isAdd = isAdd === undefined ? true : isAdd;\n    // bind each handle\n    var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener';\n    var touchAction = isAdd ? this._touchActionValue : '';\n    for ( var i=0; i < this.handles.length; i++ ) {\n      var handle = this.handles[i];\n      this._bindStartEvent( handle, isAdd );\n      handle[ bindMethod ]( 'click', this );\n      // touch-action: none to override browser touch gestures. metafizzy/flickity#540\n      if ( window.PointerEvent ) {\n        handle.style.touchAction = touchAction;\n      }\n    }\n  };\n  \n  // prototype so it can be overwriteable by Flickity\n  proto._touchActionValue = 'none';\n  \n  // ----- start event ----- //\n  \n  /**\n   * pointer start\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   */\n  proto.pointerDown = function( event, pointer ) {\n    var isOkay = this.okayPointerDown( event );\n    if ( !isOkay ) {\n      return;\n    }\n    // track start event position\n    this.pointerDownPointer = pointer;\n  \n    event.preventDefault();\n    this.pointerDownBlur();\n    // bind move and end events\n    this._bindPostStartEvents( event );\n    this.emitEvent( 'pointerDown', [ event, pointer ] );\n  };\n  \n  // nodes that have text fields\n  var cursorNodes = {\n    TEXTAREA: true,\n    INPUT: true,\n    SELECT: true,\n    OPTION: true,\n  };\n  \n  // input types that do not have text fields\n  var clickTypes = {\n    radio: true,\n    checkbox: true,\n    button: true,\n    submit: true,\n    image: true,\n    file: true,\n  };\n  \n  // dismiss inputs with text fields. flickity#403, flickity#404\n  proto.okayPointerDown = function( event ) {\n    var isCursorNode = cursorNodes[ event.target.nodeName ];\n    var isClickType = clickTypes[ event.target.type ];\n    var isOkay = !isCursorNode || isClickType;\n    if ( !isOkay ) {\n      this._pointerReset();\n    }\n    return isOkay;\n  };\n  \n  // kludge to blur previously focused input\n  proto.pointerDownBlur = function() {\n    var focused = document.activeElement;\n    // do not blur body for IE10, metafizzy/flickity#117\n    var canBlur = focused && focused.blur && focused != document.body;\n    if ( canBlur ) {\n      focused.blur();\n    }\n  };\n  \n  // ----- move event ----- //\n  \n  /**\n   * drag move\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   */\n  proto.pointerMove = function( event, pointer ) {\n    var moveVector = this._dragPointerMove( event, pointer );\n    this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\n    this._dragMove( event, pointer, moveVector );\n  };\n  \n  // base pointer move logic\n  proto._dragPointerMove = function( event, pointer ) {\n    var moveVector = {\n      x: pointer.pageX - this.pointerDownPointer.pageX,\n      y: pointer.pageY - this.pointerDownPointer.pageY\n    };\n    // start drag if pointer has moved far enough to start drag\n    if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\n      this._dragStart( event, pointer );\n    }\n    return moveVector;\n  };\n  \n  // condition if pointer has moved far enough to start drag\n  proto.hasDragStarted = function( moveVector ) {\n    return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\n  };\n  \n  // ----- end event ----- //\n  \n  /**\n   * pointer up\n   * @param {Event} event\n   * @param {Event or Touch} pointer\n   */\n  proto.pointerUp = function( event, pointer ) {\n    this.emitEvent( 'pointerUp', [ event, pointer ] );\n    this._dragPointerUp( event, pointer );\n  };\n  \n  proto._dragPointerUp = function( event, pointer ) {\n    if ( this.isDragging ) {\n      this._dragEnd( event, pointer );\n    } else {\n      // pointer didn't move enough for drag to start\n      this._staticClick( event, pointer );\n    }\n  };\n  \n  // -------------------------- drag -------------------------- //\n  \n  // dragStart\n  proto._dragStart = function( event, pointer ) {\n    this.isDragging = true;\n    // prevent clicks\n    this.isPreventingClicks = true;\n    this.dragStart( event, pointer );\n  };\n  \n  proto.dragStart = function( event, pointer ) {\n    this.emitEvent( 'dragStart', [ event, pointer ] );\n  };\n  \n  // dragMove\n  proto._dragMove = function( event, pointer, moveVector ) {\n    // do not drag if not dragging yet\n    if ( !this.isDragging ) {\n      return;\n    }\n  \n    this.dragMove( event, pointer, moveVector );\n  };\n  \n  proto.dragMove = function( event, pointer, moveVector ) {\n    event.preventDefault();\n    this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\n  };\n  \n  // dragEnd\n  proto._dragEnd = function( event, pointer ) {\n    // set flags\n    this.isDragging = false;\n    // re-enable clicking async\n    setTimeout( function() {\n      delete this.isPreventingClicks;\n    }.bind( this ) );\n  \n    this.dragEnd( event, pointer );\n  };\n  \n  proto.dragEnd = function( event, pointer ) {\n    this.emitEvent( 'dragEnd', [ event, pointer ] );\n  };\n  \n  // ----- onclick ----- //\n  \n  // handle all clicks and prevent clicks when dragging\n  proto.onclick = function( event ) {\n    if ( this.isPreventingClicks ) {\n      event.preventDefault();\n    }\n  };\n  \n  // ----- staticClick ----- //\n  \n  // triggered after pointer down & up with no/tiny movement\n  proto._staticClick = function( event, pointer ) {\n    // ignore emulated mouse up clicks\n    if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\n      return;\n    }\n  \n    this.staticClick( event, pointer );\n  \n    // set flag for emulated clicks 300ms after touchend\n    if ( event.type != 'mouseup' ) {\n      this.isIgnoringMouseUp = true;\n      // reset flag after 300ms\n      setTimeout( function() {\n        delete this.isIgnoringMouseUp;\n      }.bind( this ), 400 );\n    }\n  };\n  \n  proto.staticClick = function( event, pointer ) {\n    this.emitEvent( 'staticClick', [ event, pointer ] );\n  };\n  \n  // ----- utils ----- //\n  \n  Unidragger.getPointerPoint = Unipointer.getPointerPoint;\n  \n  // -----  ----- //\n  \n  return Unidragger;\n  \n  }));\n  \n  // drag\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/drag',[\n        './flickity',\n        'unidragger/unidragger',\n        'fizzy-ui-utils/utils'\n      ], function( Flickity, Unidragger, utils ) {\n        return factory( window, Flickity, Unidragger, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('./flickity'),\n        require('unidragger'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      window.Flickity = factory(\n        window,\n        window.Flickity,\n        window.Unidragger,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, Flickity, Unidragger, utils ) {\n  \n  \n  \n  // ----- defaults ----- //\n  \n  utils.extend( Flickity.defaults, {\n    draggable: '>1',\n    dragThreshold: 3,\n  });\n  \n  // ----- create ----- //\n  \n  Flickity.createMethods.push('_createDrag');\n  \n  // -------------------------- drag prototype -------------------------- //\n  \n  var proto = Flickity.prototype;\n  utils.extend( proto, Unidragger.prototype );\n  proto._touchActionValue = 'pan-y';\n  \n  // --------------------------  -------------------------- //\n  \n  var isTouch = 'createTouch' in document;\n  var isTouchmoveScrollCanceled = false;\n  \n  proto._createDrag = function() {\n    this.on( 'activate', this.onActivateDrag );\n    this.on( 'uiChange', this._uiChangeDrag );\n    this.on( 'deactivate', this.onDeactivateDrag );\n    this.on( 'cellChange', this.updateDraggable );\n    // TODO updateDraggable on resize? if groupCells & slides change\n    // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\n    // #457, RubaXa/Sortable#973\n    if ( isTouch && !isTouchmoveScrollCanceled ) {\n      window.addEventListener( 'touchmove', function() {});\n      isTouchmoveScrollCanceled = true;\n    }\n  };\n  \n  proto.onActivateDrag = function() {\n    this.handles = [ this.viewport ];\n    this.bindHandles();\n    this.updateDraggable();\n  };\n  \n  proto.onDeactivateDrag = function() {\n    this.unbindHandles();\n    this.element.classList.remove('is-draggable');\n  };\n  \n  proto.updateDraggable = function() {\n    // disable dragging if less than 2 slides. #278\n    if ( this.options.draggable == '>1' ) {\n      this.isDraggable = this.slides.length > 1;\n    } else {\n      this.isDraggable = this.options.draggable;\n    }\n    if ( this.isDraggable ) {\n      this.element.classList.add('is-draggable');\n    } else {\n      this.element.classList.remove('is-draggable');\n    }\n  };\n  \n  // backwards compatibility\n  proto.bindDrag = function() {\n    this.options.draggable = true;\n    this.updateDraggable();\n  };\n  \n  proto.unbindDrag = function() {\n    this.options.draggable = false;\n    this.updateDraggable();\n  };\n  \n  proto._uiChangeDrag = function() {\n    delete this.isFreeScrolling;\n  };\n  \n  // -------------------------- pointer events -------------------------- //\n  \n  proto.pointerDown = function( event, pointer ) {\n    if ( !this.isDraggable ) {\n      this._pointerDownDefault( event, pointer );\n      return;\n    }\n    var isOkay = this.okayPointerDown( event );\n    if ( !isOkay ) {\n      return;\n    }\n  \n    this._pointerDownPreventDefault( event );\n    this.pointerDownFocus( event );\n    // blur\n    if ( document.activeElement != this.element ) {\n      // do not blur if already focused\n      this.pointerDownBlur();\n    }\n  \n    // stop if it was moving\n    this.dragX = this.x;\n    this.viewport.classList.add('is-pointer-down');\n    // track scrolling\n    this.pointerDownScroll = getScrollPosition();\n    window.addEventListener( 'scroll', this );\n  \n    this._pointerDownDefault( event, pointer );\n  };\n  \n  // default pointerDown logic, used for staticClick\n  proto._pointerDownDefault = function( event, pointer ) {\n    // track start event position\n    // Safari 9 overrides pageX and pageY. These values needs to be copied. #779\n    this.pointerDownPointer = {\n      pageX: pointer.pageX,\n      pageY: pointer.pageY,\n    };\n    // bind move and end events\n    this._bindPostStartEvents( event );\n    this.dispatchEvent( 'pointerDown', event, [ pointer ] );\n  };\n  \n  var focusNodes = {\n    INPUT: true,\n    TEXTAREA: true,\n    SELECT: true,\n  };\n  \n  proto.pointerDownFocus = function( event ) {\n    var isFocusNode = focusNodes[ event.target.nodeName ];\n    if ( !isFocusNode ) {\n      this.focus();\n    }\n  };\n  \n  proto._pointerDownPreventDefault = function( event ) {\n    var isTouchStart = event.type == 'touchstart';\n    var isTouchPointer = event.pointerType == 'touch';\n    var isFocusNode = focusNodes[ event.target.nodeName ];\n    if ( !isTouchStart && !isTouchPointer && !isFocusNode ) {\n      event.preventDefault();\n    }\n  };\n  \n  // ----- move ----- //\n  \n  proto.hasDragStarted = function( moveVector ) {\n    return Math.abs( moveVector.x ) > this.options.dragThreshold;\n  };\n  \n  // ----- up ----- //\n  \n  proto.pointerUp = function( event, pointer ) {\n    delete this.isTouchScrolling;\n    this.viewport.classList.remove('is-pointer-down');\n    this.dispatchEvent( 'pointerUp', event, [ pointer ] );\n    this._dragPointerUp( event, pointer );\n  };\n  \n  proto.pointerDone = function() {\n    window.removeEventListener( 'scroll', this );\n    delete this.pointerDownScroll;\n  };\n  \n  // -------------------------- dragging -------------------------- //\n  \n  proto.dragStart = function( event, pointer ) {\n    if ( !this.isDraggable ) {\n      return;\n    }\n    this.dragStartPosition = this.x;\n    this.startAnimation();\n    window.removeEventListener( 'scroll', this );\n    this.dispatchEvent( 'dragStart', event, [ pointer ] );\n  };\n  \n  proto.pointerMove = function( event, pointer ) {\n    var moveVector = this._dragPointerMove( event, pointer );\n    this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\n    this._dragMove( event, pointer, moveVector );\n  };\n  \n  proto.dragMove = function( event, pointer, moveVector ) {\n    if ( !this.isDraggable ) {\n      return;\n    }\n    event.preventDefault();\n  \n    this.previousDragX = this.dragX;\n    // reverse if right-to-left\n    var direction = this.options.rightToLeft ? -1 : 1;\n    if ( this.options.wrapAround ) {\n      // wrap around move. #589\n      moveVector.x = moveVector.x % this.slideableWidth;\n    }\n    var dragX = this.dragStartPosition + moveVector.x * direction;\n  \n    if ( !this.options.wrapAround && this.slides.length ) {\n      // slow drag\n      var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\n      dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\n      var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\n      dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\n    }\n  \n    this.dragX = dragX;\n  \n    this.dragMoveTime = new Date();\n    this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\n  };\n  \n  proto.dragEnd = function( event, pointer ) {\n    if ( !this.isDraggable ) {\n      return;\n    }\n    if ( this.options.freeScroll ) {\n      this.isFreeScrolling = true;\n    }\n    // set selectedIndex based on where flick will end up\n    var index = this.dragEndRestingSelect();\n  \n    if ( this.options.freeScroll && !this.options.wrapAround ) {\n      // if free-scroll & not wrap around\n      // do not free-scroll if going outside of bounding slides\n      // so bounding slides can attract slider, and keep it in bounds\n      var restingX = this.getRestingPosition();\n      this.isFreeScrolling = -restingX > this.slides[0].target &&\n        -restingX < this.getLastSlide().target;\n    } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\n      // boost selection if selected index has not changed\n      index += this.dragEndBoostSelect();\n    }\n    delete this.previousDragX;\n    // apply selection\n    // TODO refactor this, selecting here feels weird\n    // HACK, set flag so dragging stays in correct direction\n    this.isDragSelect = this.options.wrapAround;\n    this.select( index );\n    delete this.isDragSelect;\n    this.dispatchEvent( 'dragEnd', event, [ pointer ] );\n  };\n  \n  proto.dragEndRestingSelect = function() {\n    var restingX = this.getRestingPosition();\n    // how far away from selected slide\n    var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\n    // get closet resting going up and going down\n    var positiveResting = this._getClosestResting( restingX, distance, 1 );\n    var negativeResting = this._getClosestResting( restingX, distance, -1 );\n    // use closer resting for wrap-around\n    var index = positiveResting.distance < negativeResting.distance ?\n      positiveResting.index : negativeResting.index;\n    return index;\n  };\n  \n  /**\n   * given resting X and distance to selected cell\n   * get the distance and index of the closest cell\n   * @param {Number} restingX - estimated post-flick resting position\n   * @param {Number} distance - distance to selected cell\n   * @param {Integer} increment - +1 or -1, going up or down\n   * @returns {Object} - { distance: {Number}, index: {Integer} }\n   */\n  proto._getClosestResting = function( restingX, distance, increment ) {\n    var index = this.selectedIndex;\n    var minDistance = Infinity;\n    var condition = this.options.contain && !this.options.wrapAround ?\n      // if contain, keep going if distance is equal to minDistance\n      function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\n    while ( condition( distance, minDistance ) ) {\n      // measure distance to next cell\n      index += increment;\n      minDistance = distance;\n      distance = this.getSlideDistance( -restingX, index );\n      if ( distance === null ) {\n        break;\n      }\n      distance = Math.abs( distance );\n    }\n    return {\n      distance: minDistance,\n      // selected was previous index\n      index: index - increment\n    };\n  };\n  \n  /**\n   * measure distance between x and a slide target\n   * @param {Number} x\n   * @param {Integer} index - slide index\n   */\n  proto.getSlideDistance = function( x, index ) {\n    var len = this.slides.length;\n    // wrap around if at least 2 slides\n    var isWrapAround = this.options.wrapAround && len > 1;\n    var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\n    var slide = this.slides[ slideIndex ];\n    if ( !slide ) {\n      return null;\n    }\n    // add distance for wrap-around slides\n    var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\n    return x - ( slide.target + wrap );\n  };\n  \n  proto.dragEndBoostSelect = function() {\n    // do not boost if no previousDragX or dragMoveTime\n    if ( this.previousDragX === undefined || !this.dragMoveTime ||\n      // or if drag was held for 100 ms\n      new Date() - this.dragMoveTime > 100 ) {\n      return 0;\n    }\n  \n    var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\n    var delta = this.previousDragX - this.dragX;\n    if ( distance > 0 && delta > 0 ) {\n      // boost to next if moving towards the right, and positive velocity\n      return 1;\n    } else if ( distance < 0 && delta < 0 ) {\n      // boost to previous if moving towards the left, and negative velocity\n      return -1;\n    }\n    return 0;\n  };\n  \n  // ----- staticClick ----- //\n  \n  proto.staticClick = function( event, pointer ) {\n    // get clickedCell, if cell was clicked\n    var clickedCell = this.getParentCell( event.target );\n    var cellElem = clickedCell && clickedCell.element;\n    var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\n    this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\n  };\n  \n  // ----- scroll ----- //\n  \n  proto.onscroll = function() {\n    var scroll = getScrollPosition();\n    var scrollMoveX = this.pointerDownScroll.x - scroll.x;\n    var scrollMoveY = this.pointerDownScroll.y - scroll.y;\n    // cancel click/tap if scroll is too much\n    if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\n      this._pointerDone();\n    }\n  };\n  \n  // ----- utils ----- //\n  \n  function getScrollPosition() {\n    return {\n      x: window.pageXOffset,\n      y: window.pageYOffset\n    };\n  }\n  \n  // -----  ----- //\n  \n  return Flickity;\n  \n  }));\n  \n  // prev/next buttons\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/prev-next-button',[\n        './flickity',\n        'unipointer/unipointer',\n        'fizzy-ui-utils/utils'\n      ], function( Flickity, Unipointer, utils ) {\n        return factory( window, Flickity, Unipointer, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('./flickity'),\n        require('unipointer'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      factory(\n        window,\n        window.Flickity,\n        window.Unipointer,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, Flickity, Unipointer, utils ) {\n  'use strict';\n  \n  var svgURI = 'http://www.w3.org/2000/svg';\n  \n  // -------------------------- PrevNextButton -------------------------- //\n  \n  function PrevNextButton( direction, parent ) {\n    this.direction = direction;\n    this.parent = parent;\n    this._create();\n  }\n  \n  PrevNextButton.prototype = Object.create( Unipointer.prototype );\n  \n  PrevNextButton.prototype._create = function() {\n    // properties\n    this.isEnabled = true;\n    this.isPrevious = this.direction == -1;\n    var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\n    this.isLeft = this.direction == leftDirection;\n  \n    var element = this.element = document.createElement('button');\n    element.className = 'flickity-button flickity-prev-next-button';\n    element.className += this.isPrevious ? ' previous' : ' next';\n    // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\n    element.setAttribute( 'type', 'button' );\n    // init as disabled\n    this.disable();\n  \n    element.setAttribute( 'aria-label', this.isPrevious ? 'Previous' : 'Next' );\n  \n    // create arrow\n    var svg = this.createSVG();\n    element.appendChild( svg );\n    // events\n    this.parent.on( 'select', this.update.bind( this ) );\n    this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\n  };\n  \n  PrevNextButton.prototype.activate = function() {\n    this.bindStartEvent( this.element );\n    this.element.addEventListener( 'click', this );\n    // add to DOM\n    this.parent.element.appendChild( this.element );\n  };\n  \n  PrevNextButton.prototype.deactivate = function() {\n    // remove from DOM\n    this.parent.element.removeChild( this.element );\n    // click events\n    this.unbindStartEvent( this.element );\n    this.element.removeEventListener( 'click', this );\n  };\n  \n  PrevNextButton.prototype.createSVG = function() {\n    var svg = document.createElementNS( svgURI, 'svg');\n    svg.setAttribute( 'class', 'flickity-button-icon' );\n    svg.setAttribute( 'viewBox', '0 0 100 100' );\n    var path = document.createElementNS( svgURI, 'path');\n    var pathMovements = getArrowMovements( this.parent.options.arrowShape );\n    path.setAttribute( 'd', pathMovements );\n    path.setAttribute( 'class', 'arrow' );\n    // rotate arrow\n    if ( !this.isLeft ) {\n      path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\n    }\n    svg.appendChild( path );\n    return svg;\n  };\n  \n  // get SVG path movmement\n  function getArrowMovements( shape ) {\n    // use shape as movement if string\n    if ( typeof shape == 'string' ) {\n      return shape;\n    }\n    // create movement string\n    return 'M ' + shape.x0 + ',50' +\n      ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\n      ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\n      ' L ' + shape.x3 + ',50 ' +\n      ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\n      ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\n      ' Z';\n  }\n  \n  PrevNextButton.prototype.handleEvent = utils.handleEvent;\n  \n  PrevNextButton.prototype.onclick = function() {\n    if ( !this.isEnabled ) {\n      return;\n    }\n    this.parent.uiChange();\n    var method = this.isPrevious ? 'previous' : 'next';\n    this.parent[ method ]();\n  };\n  \n  // -----  ----- //\n  \n  PrevNextButton.prototype.enable = function() {\n    if ( this.isEnabled ) {\n      return;\n    }\n    this.element.disabled = false;\n    this.isEnabled = true;\n  };\n  \n  PrevNextButton.prototype.disable = function() {\n    if ( !this.isEnabled ) {\n      return;\n    }\n    this.element.disabled = true;\n    this.isEnabled = false;\n  };\n  \n  PrevNextButton.prototype.update = function() {\n    // index of first or last slide, if previous or next\n    var slides = this.parent.slides;\n    // enable is wrapAround and at least 2 slides\n    if ( this.parent.options.wrapAround && slides.length > 1 ) {\n      this.enable();\n      return;\n    }\n    var lastIndex = slides.length ? slides.length - 1 : 0;\n    var boundIndex = this.isPrevious ? 0 : lastIndex;\n    var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\n    this[ method ]();\n  };\n  \n  PrevNextButton.prototype.destroy = function() {\n    this.deactivate();\n    this.allOff();\n  };\n  \n  // -------------------------- Flickity prototype -------------------------- //\n  \n  utils.extend( Flickity.defaults, {\n    prevNextButtons: true,\n    arrowShape: {\n      x0: 10,\n      x1: 60, y1: 50,\n      x2: 70, y2: 40,\n      x3: 30\n    }\n  });\n  \n  Flickity.createMethods.push('_createPrevNextButtons');\n  var proto = Flickity.prototype;\n  \n  proto._createPrevNextButtons = function() {\n    if ( !this.options.prevNextButtons ) {\n      return;\n    }\n  \n    this.prevButton = new PrevNextButton( -1, this );\n    this.nextButton = new PrevNextButton( 1, this );\n  \n    this.on( 'activate', this.activatePrevNextButtons );\n  };\n  \n  proto.activatePrevNextButtons = function() {\n    this.prevButton.activate();\n    this.nextButton.activate();\n    this.on( 'deactivate', this.deactivatePrevNextButtons );\n  };\n  \n  proto.deactivatePrevNextButtons = function() {\n    this.prevButton.deactivate();\n    this.nextButton.deactivate();\n    this.off( 'deactivate', this.deactivatePrevNextButtons );\n  };\n  \n  // --------------------------  -------------------------- //\n  \n  Flickity.PrevNextButton = PrevNextButton;\n  \n  return Flickity;\n  \n  }));\n  \n  // page dots\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/page-dots',[\n        './flickity',\n        'unipointer/unipointer',\n        'fizzy-ui-utils/utils'\n      ], function( Flickity, Unipointer, utils ) {\n        return factory( window, Flickity, Unipointer, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('./flickity'),\n        require('unipointer'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      factory(\n        window,\n        window.Flickity,\n        window.Unipointer,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, Flickity, Unipointer, utils ) {\n  \n  // -------------------------- PageDots -------------------------- //\n  \n  \n  \n  function PageDots( parent ) {\n    this.parent = parent;\n    this._create();\n  }\n  \n  PageDots.prototype = Object.create( Unipointer.prototype );\n  \n  PageDots.prototype._create = function() {\n    // create holder element\n    this.holder = document.createElement('ol');\n    this.holder.className = 'flickity-page-dots';\n    // create dots, array of elements\n    this.dots = [];\n    // events\n    this.handleClick = this.onClick.bind( this );\n    this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\n  };\n  \n  PageDots.prototype.activate = function() {\n    this.setDots();\n    this.holder.addEventListener( 'click', this.handleClick );\n    this.bindStartEvent( this.holder );\n    // add to DOM\n    this.parent.element.appendChild( this.holder );\n  };\n  \n  PageDots.prototype.deactivate = function() {\n    this.holder.removeEventListener( 'click', this.handleClick );\n    this.unbindStartEvent( this.holder );\n    // remove from DOM\n    this.parent.element.removeChild( this.holder );\n  };\n  \n  PageDots.prototype.setDots = function() {\n    // get difference between number of slides and number of dots\n    var delta = this.parent.slides.length - this.dots.length;\n    if ( delta > 0 ) {\n      this.addDots( delta );\n    } else if ( delta < 0 ) {\n      this.removeDots( -delta );\n    }\n  };\n  \n  PageDots.prototype.addDots = function( count ) {\n    var fragment = document.createDocumentFragment();\n    var newDots = [];\n    var length = this.dots.length;\n    var max = length + count;\n  \n    for ( var i = length; i < max; i++ ) {\n      var dot = document.createElement('li');\n      dot.className = 'dot';\n      dot.setAttribute( 'aria-label', 'Page dot ' + ( i + 1 ) );\n      fragment.appendChild( dot );\n      newDots.push( dot );\n    }\n  \n    this.holder.appendChild( fragment );\n    this.dots = this.dots.concat( newDots );\n  };\n  \n  PageDots.prototype.removeDots = function( count ) {\n    // remove from this.dots collection\n    var removeDots = this.dots.splice( this.dots.length - count, count );\n    // remove from DOM\n    removeDots.forEach( function( dot ) {\n      this.holder.removeChild( dot );\n    }, this );\n  };\n  \n  PageDots.prototype.updateSelected = function() {\n    // remove selected class on previous\n    if ( this.selectedDot ) {\n      this.selectedDot.className = 'dot';\n      this.selectedDot.removeAttribute('aria-current');\n    }\n    // don't proceed if no dots\n    if ( !this.dots.length ) {\n      return;\n    }\n    this.selectedDot = this.dots[ this.parent.selectedIndex ];\n    this.selectedDot.className = 'dot is-selected';\n    this.selectedDot.setAttribute( 'aria-current', 'step' );\n  };\n  \n  PageDots.prototype.onTap = // old method name, backwards-compatible\n  PageDots.prototype.onClick = function( event ) {\n    var target = event.target;\n    // only care about dot clicks\n    if ( target.nodeName != 'LI' ) {\n      return;\n    }\n  \n    this.parent.uiChange();\n    var index = this.dots.indexOf( target );\n    this.parent.select( index );\n  };\n  \n  PageDots.prototype.destroy = function() {\n    this.deactivate();\n    this.allOff();\n  };\n  \n  Flickity.PageDots = PageDots;\n  \n  // -------------------------- Flickity -------------------------- //\n  \n  utils.extend( Flickity.defaults, {\n    pageDots: true\n  });\n  \n  Flickity.createMethods.push('_createPageDots');\n  \n  var proto = Flickity.prototype;\n  \n  proto._createPageDots = function() {\n    if ( !this.options.pageDots ) {\n      return;\n    }\n    this.pageDots = new PageDots( this );\n    // events\n    this.on( 'activate', this.activatePageDots );\n    this.on( 'select', this.updateSelectedPageDots );\n    this.on( 'cellChange', this.updatePageDots );\n    this.on( 'resize', this.updatePageDots );\n    this.on( 'deactivate', this.deactivatePageDots );\n  };\n  \n  proto.activatePageDots = function() {\n    this.pageDots.activate();\n  };\n  \n  proto.updateSelectedPageDots = function() {\n    this.pageDots.updateSelected();\n  };\n  \n  proto.updatePageDots = function() {\n    this.pageDots.setDots();\n  };\n  \n  proto.deactivatePageDots = function() {\n    this.pageDots.deactivate();\n  };\n  \n  // -----  ----- //\n  \n  Flickity.PageDots = PageDots;\n  \n  return Flickity;\n  \n  }));\n  \n  // player & autoPlay\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/player',[\n        'ev-emitter/ev-emitter',\n        'fizzy-ui-utils/utils',\n        './flickity'\n      ], function( EvEmitter, utils, Flickity ) {\n        return factory( EvEmitter, utils, Flickity );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        require('ev-emitter'),\n        require('fizzy-ui-utils'),\n        require('./flickity')\n      );\n    } else {\n      // browser global\n      factory(\n        window.EvEmitter,\n        window.fizzyUIUtils,\n        window.Flickity\n      );\n    }\n  \n  }( window, function factory( EvEmitter, utils, Flickity ) {\n  \n  \n  \n  // -------------------------- Player -------------------------- //\n  \n  function Player( parent ) {\n    this.parent = parent;\n    this.state = 'stopped';\n    // visibility change event handler\n    this.onVisibilityChange = this.visibilityChange.bind( this );\n    this.onVisibilityPlay = this.visibilityPlay.bind( this );\n  }\n  \n  Player.prototype = Object.create( EvEmitter.prototype );\n  \n  // start play\n  Player.prototype.play = function() {\n    if ( this.state == 'playing' ) {\n      return;\n    }\n    // do not play if page is hidden, start playing when page is visible\n    var isPageHidden = document.hidden;\n    if ( isPageHidden ) {\n      document.addEventListener( 'visibilitychange', this.onVisibilityPlay );\n      return;\n    }\n  \n    this.state = 'playing';\n    // listen to visibility change\n    document.addEventListener( 'visibilitychange', this.onVisibilityChange );\n    // start ticking\n    this.tick();\n  };\n  \n  Player.prototype.tick = function() {\n    // do not tick if not playing\n    if ( this.state != 'playing' ) {\n      return;\n    }\n  \n    var time = this.parent.options.autoPlay;\n    // default to 3 seconds\n    time = typeof time == 'number' ? time : 3000;\n    var _this = this;\n    // HACK: reset ticks if stopped and started within interval\n    this.clear();\n    this.timeout = setTimeout( function() {\n      _this.parent.next( true );\n      _this.tick();\n    }, time );\n  };\n  \n  Player.prototype.stop = function() {\n    this.state = 'stopped';\n    this.clear();\n    // remove visibility change event\n    document.removeEventListener( 'visibilitychange', this.onVisibilityChange );\n  };\n  \n  Player.prototype.clear = function() {\n    clearTimeout( this.timeout );\n  };\n  \n  Player.prototype.pause = function() {\n    if ( this.state == 'playing' ) {\n      this.state = 'paused';\n      this.clear();\n    }\n  };\n  \n  Player.prototype.unpause = function() {\n    // re-start play if paused\n    if ( this.state == 'paused' ) {\n      this.play();\n    }\n  };\n  \n  // pause if page visibility is hidden, unpause if visible\n  Player.prototype.visibilityChange = function() {\n    var isPageHidden = document.hidden;\n    this[ isPageHidden ? 'pause' : 'unpause' ]();\n  };\n  \n  Player.prototype.visibilityPlay = function() {\n    this.play();\n    document.removeEventListener( 'visibilitychange', this.onVisibilityPlay );\n  };\n  \n  // -------------------------- Flickity -------------------------- //\n  \n  utils.extend( Flickity.defaults, {\n    pauseAutoPlayOnHover: true\n  });\n  \n  Flickity.createMethods.push('_createPlayer');\n  var proto = Flickity.prototype;\n  \n  proto._createPlayer = function() {\n    this.player = new Player( this );\n  \n    this.on( 'activate', this.activatePlayer );\n    this.on( 'uiChange', this.stopPlayer );\n    this.on( 'pointerDown', this.stopPlayer );\n    this.on( 'deactivate', this.deactivatePlayer );\n  };\n  \n  proto.activatePlayer = function() {\n    if ( !this.options.autoPlay ) {\n      return;\n    }\n    this.player.play();\n    this.element.addEventListener( 'mouseenter', this );\n  };\n  \n  // Player API, don't hate the ... thanks I know where the door is\n  \n  proto.playPlayer = function() {\n    this.player.play();\n  };\n  \n  proto.stopPlayer = function() {\n    this.player.stop();\n  };\n  \n  proto.pausePlayer = function() {\n    this.player.pause();\n  };\n  \n  proto.unpausePlayer = function() {\n    this.player.unpause();\n  };\n  \n  proto.deactivatePlayer = function() {\n    this.player.stop();\n    this.element.removeEventListener( 'mouseenter', this );\n  };\n  \n  // ----- mouseenter/leave ----- //\n  \n  // pause auto-play on hover\n  proto.onmouseenter = function() {\n    if ( !this.options.pauseAutoPlayOnHover ) {\n      return;\n    }\n    this.player.pause();\n    this.element.addEventListener( 'mouseleave', this );\n  };\n  \n  // resume auto-play on hover off\n  proto.onmouseleave = function() {\n    this.player.unpause();\n    this.element.removeEventListener( 'mouseleave', this );\n  };\n  \n  // -----  ----- //\n  \n  Flickity.Player = Player;\n  \n  return Flickity;\n  \n  }));\n  \n  // add, remove cell\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/add-remove-cell',[\n        './flickity',\n        'fizzy-ui-utils/utils'\n      ], function( Flickity, utils ) {\n        return factory( window, Flickity, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('./flickity'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      factory(\n        window,\n        window.Flickity,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, Flickity, utils ) {\n  \n  \n  \n  // append cells to a document fragment\n  function getCellsFragment( cells ) {\n    var fragment = document.createDocumentFragment();\n    cells.forEach( function( cell ) {\n      fragment.appendChild( cell.element );\n    });\n    return fragment;\n  }\n  \n  // -------------------------- add/remove cell prototype -------------------------- //\n  \n  var proto = Flickity.prototype;\n  \n  /**\n   * Insert, prepend, or append cells\n   * @param {Element, Array, NodeList} elems\n   * @param {Integer} index\n   */\n  proto.insert = function( elems, index ) {\n    var cells = this._makeCells( elems );\n    if ( !cells || !cells.length ) {\n      return;\n    }\n    var len = this.cells.length;\n    // default to append\n    index = index === undefined ? len : index;\n    // add cells with document fragment\n    var fragment = getCellsFragment( cells );\n    // append to slider\n    var isAppend = index == len;\n    if ( isAppend ) {\n      this.slider.appendChild( fragment );\n    } else {\n      var insertCellElement = this.cells[ index ].element;\n      this.slider.insertBefore( fragment, insertCellElement );\n    }\n    // add to this.cells\n    if ( index === 0 ) {\n      // prepend, add to start\n      this.cells = cells.concat( this.cells );\n    } else if ( isAppend ) {\n      // append, add to end\n      this.cells = this.cells.concat( cells );\n    } else {\n      // insert in this.cells\n      var endCells = this.cells.splice( index, len - index );\n      this.cells = this.cells.concat( cells ).concat( endCells );\n    }\n  \n    this._sizeCells( cells );\n    this.cellChange( index, true );\n  };\n  \n  proto.append = function( elems ) {\n    this.insert( elems, this.cells.length );\n  };\n  \n  proto.prepend = function( elems ) {\n    this.insert( elems, 0 );\n  };\n  \n  /**\n   * Remove cells\n   * @param {Element, Array, NodeList} elems\n   */\n  proto.remove = function( elems ) {\n    var cells = this.getCells( elems );\n    if ( !cells || !cells.length ) {\n      return;\n    }\n  \n    var minCellIndex = this.cells.length - 1;\n    // remove cells from collection & DOM\n    cells.forEach( function( cell ) {\n      cell.remove();\n      var index = this.cells.indexOf( cell );\n      minCellIndex = Math.min( index, minCellIndex );\n      utils.removeFrom( this.cells, cell );\n    }, this );\n  \n    this.cellChange( minCellIndex, true );\n  };\n  \n  /**\n   * logic to be run after a cell's size changes\n   * @param {Element} elem - cell's element\n   */\n  proto.cellSizeChange = function( elem ) {\n    var cell = this.getCell( elem );\n    if ( !cell ) {\n      return;\n    }\n    cell.getSize();\n  \n    var index = this.cells.indexOf( cell );\n    this.cellChange( index );\n  };\n  \n  /**\n   * logic any time a cell is changed: added, removed, or size changed\n   * @param {Integer} changedCellIndex - index of the changed cell, optional\n   */\n  proto.cellChange = function( changedCellIndex, isPositioningSlider ) {\n    var prevSelectedElem = this.selectedElement;\n    this._positionCells( changedCellIndex );\n    this._getWrapShiftCells();\n    this.setGallerySize();\n    // update selectedIndex\n    // try to maintain position & select previous selected element\n    var cell = this.getCell( prevSelectedElem );\n    if ( cell ) {\n      this.selectedIndex = this.getCellSlideIndex( cell );\n    }\n    this.selectedIndex = Math.min( this.slides.length - 1, this.selectedIndex );\n  \n    this.emitEvent( 'cellChange', [ changedCellIndex ] );\n    // position slider\n    this.select( this.selectedIndex );\n    // do not position slider after lazy load\n    if ( isPositioningSlider ) {\n      this.positionSliderAtSelected();\n    }\n  };\n  \n  // -----  ----- //\n  \n  return Flickity;\n  \n  }));\n  \n  // lazyload\n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/lazyload',[\n        './flickity',\n        'fizzy-ui-utils/utils'\n      ], function( Flickity, utils ) {\n        return factory( window, Flickity, utils );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('./flickity'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      factory(\n        window,\n        window.Flickity,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( window, Flickity, utils ) {\n  'use strict';\n  \n  Flickity.createMethods.push('_createLazyload');\n  var proto = Flickity.prototype;\n  \n  proto._createLazyload = function() {\n    this.on( 'select', this.lazyLoad );\n  };\n  \n  proto.lazyLoad = function() {\n    var lazyLoad = this.options.lazyLoad;\n    if ( !lazyLoad ) {\n      return;\n    }\n    // get adjacent cells, use lazyLoad option for adjacent count\n    var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\n    var cellElems = this.getAdjacentCellElements( adjCount );\n    // get lazy images in those cells\n    var lazyImages = [];\n    cellElems.forEach( function( cellElem ) {\n      var lazyCellImages = getCellLazyImages( cellElem );\n      lazyImages = lazyImages.concat( lazyCellImages );\n    });\n    // load lazy images\n    lazyImages.forEach( function( img ) {\n      new LazyLoader( img, this );\n    }, this );\n  };\n  \n  function getCellLazyImages( cellElem ) {\n    // check if cell element is lazy image\n    if ( cellElem.nodeName == 'IMG' ) {\n      var lazyloadAttr = cellElem.getAttribute('data-flickity-lazyload');\n      var srcAttr = cellElem.getAttribute('data-flickity-lazyload-src');\n      var srcsetAttr = cellElem.getAttribute('data-flickity-lazyload-srcset');\n      if ( lazyloadAttr || srcAttr || srcsetAttr ) {\n        return [ cellElem ];\n      }\n    }\n    // select lazy images in cell\n    var lazySelector = 'img[data-flickity-lazyload], ' +\n      'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';\n    var imgs = cellElem.querySelectorAll( lazySelector );\n    return utils.makeArray( imgs );\n  }\n  \n  // -------------------------- LazyLoader -------------------------- //\n  \n  /**\n   * class to handle loading images\n   */\n  function LazyLoader( img, flickity ) {\n    this.img = img;\n    this.flickity = flickity;\n    this.load();\n  }\n  \n  LazyLoader.prototype.handleEvent = utils.handleEvent;\n  \n  LazyLoader.prototype.load = function() {\n    this.img.addEventListener( 'load', this );\n    this.img.addEventListener( 'error', this );\n    // get src & srcset\n    var src = this.img.getAttribute('data-flickity-lazyload') ||\n      this.img.getAttribute('data-flickity-lazyload-src');\n    var srcset = this.img.getAttribute('data-flickity-lazyload-srcset');\n    // set src & serset\n    this.img.src = src;\n    if ( srcset ) {\n      this.img.setAttribute( 'srcset', srcset );\n    }\n    // remove attr\n    this.img.removeAttribute('data-flickity-lazyload');\n    this.img.removeAttribute('data-flickity-lazyload-src');\n    this.img.removeAttribute('data-flickity-lazyload-srcset');\n  };\n  \n  LazyLoader.prototype.onload = function( event ) {\n    this.complete( event, 'flickity-lazyloaded' );\n  };\n  \n  LazyLoader.prototype.onerror = function( event ) {\n    this.complete( event, 'flickity-lazyerror' );\n  };\n  \n  LazyLoader.prototype.complete = function( event, className ) {\n    // unbind events\n    this.img.removeEventListener( 'load', this );\n    this.img.removeEventListener( 'error', this );\n  \n    var cell = this.flickity.getParentCell( this.img );\n    var cellElem = cell && cell.element;\n    this.flickity.cellSizeChange( cellElem );\n  \n    this.img.classList.add( className );\n    this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\n  };\n  \n  // -----  ----- //\n  \n  Flickity.LazyLoader = LazyLoader;\n  \n  return Flickity;\n  \n  }));\n  \n  /*!\n   * Flickity v2.2.1\n   * Touch, responsive, flickable carousels\n   *\n   * Licensed GPLv3 for open source use\n   * or Flickity Commercial License for commercial use\n   *\n   * https://flickity.metafizzy.co\n   * Copyright 2015-2019 Metafizzy\n   */\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /* jshint strict: false */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity/js/index',[\n        './flickity',\n        './drag',\n        './prev-next-button',\n        './page-dots',\n        './player',\n        './add-remove-cell',\n        './lazyload'\n      ], factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        require('./flickity'),\n        require('./drag'),\n        require('./prev-next-button'),\n        require('./page-dots'),\n        require('./player'),\n        require('./add-remove-cell'),\n        require('./lazyload')\n      );\n    }\n  \n  })( window, function factory( Flickity ) {\n    /*jshint strict: false*/\n    return Flickity;\n  });\n  \n  /*!\n   * Flickity asNavFor v2.0.2\n   * enable asNavFor for Flickity\n   */\n  \n  /*jshint browser: true, undef: true, unused: true, strict: true*/\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /*jshint strict: false */ /*globals define, module, require */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'flickity-as-nav-for/as-nav-for',[\n        'flickity/js/index',\n        'fizzy-ui-utils/utils'\n      ], factory );\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        require('flickity'),\n        require('fizzy-ui-utils')\n      );\n    } else {\n      // browser global\n      window.Flickity = factory(\n        window.Flickity,\n        window.fizzyUIUtils\n      );\n    }\n  \n  }( window, function factory( Flickity, utils ) {\n  \n  \n  \n  // -------------------------- asNavFor prototype -------------------------- //\n  \n  // Flickity.defaults.asNavFor = null;\n  \n  Flickity.createMethods.push('_createAsNavFor');\n  \n  var proto = Flickity.prototype;\n  \n  proto._createAsNavFor = function() {\n    this.on( 'activate', this.activateAsNavFor );\n    this.on( 'deactivate', this.deactivateAsNavFor );\n    this.on( 'destroy', this.destroyAsNavFor );\n  \n    var asNavForOption = this.options.asNavFor;\n    if ( !asNavForOption ) {\n      return;\n    }\n    // HACK do async, give time for other flickity to be initalized\n    var _this = this;\n    setTimeout( function initNavCompanion() {\n      _this.setNavCompanion( asNavForOption );\n    });\n  };\n  \n  proto.setNavCompanion = function( elem ) {\n    elem = utils.getQueryElement( elem );\n    var companion = Flickity.data( elem );\n    // stop if no companion or companion is self\n    if ( !companion || companion == this ) {\n      return;\n    }\n  \n    this.navCompanion = companion;\n    // companion select\n    var _this = this;\n    this.onNavCompanionSelect = function() {\n      _this.navCompanionSelect();\n    };\n    companion.on( 'select', this.onNavCompanionSelect );\n    // click\n    this.on( 'staticClick', this.onNavStaticClick );\n  \n    this.navCompanionSelect( true );\n  };\n  \n  proto.navCompanionSelect = function( isInstant ) {\n    // wait for companion & selectedCells first. #8\n    var companionCells = this.navCompanion && this.navCompanion.selectedCells;\n    if ( !companionCells ) {\n      return;\n    }\n    // select slide that matches first cell of slide\n    var selectedCell = companionCells[0];\n    var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\n    var lastIndex = firstIndex + companionCells.length - 1;\n    var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\n      this.navCompanion.cellAlign ) );\n    this.selectCell( selectIndex, false, isInstant );\n    // set nav selected class\n    this.removeNavSelectedElements();\n    // stop if companion has more cells than this one\n    if ( selectIndex >= this.cells.length ) {\n      return;\n    }\n  \n    var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\n    this.navSelectedElements = selectedCells.map( function( cell ) {\n      return cell.element;\n    });\n    this.changeNavSelectedClass('add');\n  };\n  \n  function lerp( a, b, t ) {\n    return ( b - a ) * t + a;\n  }\n  \n  proto.changeNavSelectedClass = function( method ) {\n    this.navSelectedElements.forEach( function( navElem ) {\n      navElem.classList[ method ]('is-nav-selected');\n    });\n  };\n  \n  proto.activateAsNavFor = function() {\n    this.navCompanionSelect( true );\n  };\n  \n  proto.removeNavSelectedElements = function() {\n    if ( !this.navSelectedElements ) {\n      return;\n    }\n    this.changeNavSelectedClass('remove');\n    delete this.navSelectedElements;\n  };\n  \n  proto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\n    if ( typeof cellIndex == 'number' ) {\n      this.navCompanion.selectCell( cellIndex );\n    }\n  };\n  \n  proto.deactivateAsNavFor = function() {\n    this.removeNavSelectedElements();\n  };\n  \n  proto.destroyAsNavFor = function() {\n    if ( !this.navCompanion ) {\n      return;\n    }\n    this.navCompanion.off( 'select', this.onNavCompanionSelect );\n    this.off( 'staticClick', this.onNavStaticClick );\n    delete this.navCompanion;\n  };\n  \n  // -----  ----- //\n  \n  return Flickity;\n  \n  }));\n  \n  /*!\n   * imagesLoaded v4.1.4\n   * JavaScript is all like \"You images are done yet or what?\"\n   * MIT License\n   */\n  \n  ( function( window, factory ) { 'use strict';\n    // universal module definition\n  \n    /*global define: false, module: false, require: false */\n  \n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( 'imagesloaded/imagesloaded',[\n        'ev-emitter/ev-emitter'\n      ], function( EvEmitter ) {\n        return factory( window, EvEmitter );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('ev-emitter')\n      );\n    } else {\n      // browser global\n      window.imagesLoaded = factory(\n        window,\n        window.EvEmitter\n      );\n    }\n  \n  })( typeof window !== 'undefined' ? window : this,\n  \n  // --------------------------  factory -------------------------- //\n  \n  function factory( window, EvEmitter ) {\n  \n  \n  \n  var $ = window.jQuery;\n  var console = window.console;\n  \n  // -------------------------- helpers -------------------------- //\n  \n  // extend objects\n  function extend( a, b ) {\n    for ( var prop in b ) {\n      a[ prop ] = b[ prop ];\n    }\n    return a;\n  }\n  \n  var arraySlice = Array.prototype.slice;\n  \n  // turn element or nodeList into an array\n  function makeArray( obj ) {\n    if ( Array.isArray( obj ) ) {\n      // use object if already an array\n      return obj;\n    }\n  \n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n    if ( isArrayLike ) {\n      // convert nodeList to array\n      return arraySlice.call( obj );\n    }\n  \n    // array of single index\n    return [ obj ];\n  }\n  \n  // -------------------------- imagesLoaded -------------------------- //\n  \n  /**\n   * @param {Array, Element, NodeList, String} elem\n   * @param {Object or Function} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   */\n  function ImagesLoaded( elem, options, onAlways ) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if ( !( this instanceof ImagesLoaded ) ) {\n      return new ImagesLoaded( elem, options, onAlways );\n    }\n    // use elem as selector string\n    var queryElem = elem;\n    if ( typeof elem == 'string' ) {\n      queryElem = document.querySelectorAll( elem );\n    }\n    // bail if bad element\n    if ( !queryElem ) {\n      console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n      return;\n    }\n  \n    this.elements = makeArray( queryElem );\n    this.options = extend( {}, this.options );\n    // shift arguments if no options set\n    if ( typeof options == 'function' ) {\n      onAlways = options;\n    } else {\n      extend( this.options, options );\n    }\n  \n    if ( onAlways ) {\n      this.on( 'always', onAlways );\n    }\n  \n    this.getImages();\n  \n    if ( $ ) {\n      // add jQuery Deferred object\n      this.jqDeferred = new $.Deferred();\n    }\n  \n    // HACK check async to allow time to bind listeners\n    setTimeout( this.check.bind( this ) );\n  }\n  \n  ImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n  \n  ImagesLoaded.prototype.options = {};\n  \n  ImagesLoaded.prototype.getImages = function() {\n    this.images = [];\n  \n    // filter & find items if we have an item selector\n    this.elements.forEach( this.addElementImages, this );\n  };\n  \n  /**\n   * @param {Node} element\n   */\n  ImagesLoaded.prototype.addElementImages = function( elem ) {\n    // filter siblings\n    if ( elem.nodeName == 'IMG' ) {\n      this.addImage( elem );\n    }\n    // get background image on element\n    if ( this.options.background === true ) {\n      this.addElementBackgroundImages( elem );\n    }\n  \n    // find children\n    // no non-element nodes, #143\n    var nodeType = elem.nodeType;\n    if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n      return;\n    }\n    var childImgs = elem.querySelectorAll('img');\n    // concat childElems to filterFound array\n    for ( var i=0; i < childImgs.length; i++ ) {\n      var img = childImgs[i];\n      this.addImage( img );\n    }\n  \n    // get child background images\n    if ( typeof this.options.background == 'string' ) {\n      var children = elem.querySelectorAll( this.options.background );\n      for ( i=0; i < children.length; i++ ) {\n        var child = children[i];\n        this.addElementBackgroundImages( child );\n      }\n    }\n  };\n  \n  var elementNodeTypes = {\n    1: true,\n    9: true,\n    11: true\n  };\n  \n  ImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n    var style = getComputedStyle( elem );\n    if ( !style ) {\n      // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n      return;\n    }\n    // get url inside url(\"...\")\n    var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n    var matches = reURL.exec( style.backgroundImage );\n    while ( matches !== null ) {\n      var url = matches && matches[2];\n      if ( url ) {\n        this.addBackground( url, elem );\n      }\n      matches = reURL.exec( style.backgroundImage );\n    }\n  };\n  \n  /**\n   * @param {Image} img\n   */\n  ImagesLoaded.prototype.addImage = function( img ) {\n    var loadingImage = new LoadingImage( img );\n    this.images.push( loadingImage );\n  };\n  \n  ImagesLoaded.prototype.addBackground = function( url, elem ) {\n    var background = new Background( url, elem );\n    this.images.push( background );\n  };\n  \n  ImagesLoaded.prototype.check = function() {\n    var _this = this;\n    this.progressedCount = 0;\n    this.hasAnyBroken = false;\n    // complete if no images\n    if ( !this.images.length ) {\n      this.complete();\n      return;\n    }\n  \n    function onProgress( image, elem, message ) {\n      // HACK - Chrome triggers event before object properties have changed. #83\n      setTimeout( function() {\n        _this.progress( image, elem, message );\n      });\n    }\n  \n    this.images.forEach( function( loadingImage ) {\n      loadingImage.once( 'progress', onProgress );\n      loadingImage.check();\n    });\n  };\n  \n  ImagesLoaded.prototype.progress = function( image, elem, message ) {\n    this.progressedCount++;\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n    // progress event\n    this.emitEvent( 'progress', [ this, image, elem ] );\n    if ( this.jqDeferred && this.jqDeferred.notify ) {\n      this.jqDeferred.notify( this, image );\n    }\n    // check if completed\n    if ( this.progressedCount == this.images.length ) {\n      this.complete();\n    }\n  \n    if ( this.options.debug && console ) {\n      console.log( 'progress: ' + message, image, elem );\n    }\n  };\n  \n  ImagesLoaded.prototype.complete = function() {\n    var eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    this.emitEvent( eventName, [ this ] );\n    this.emitEvent( 'always', [ this ] );\n    if ( this.jqDeferred ) {\n      var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n      this.jqDeferred[ jqMethod ]( this );\n    }\n  };\n  \n  // --------------------------  -------------------------- //\n  \n  function LoadingImage( img ) {\n    this.img = img;\n  }\n  \n  LoadingImage.prototype = Object.create( EvEmitter.prototype );\n  \n  LoadingImage.prototype.check = function() {\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    var isComplete = this.getIsImageComplete();\n    if ( isComplete ) {\n      // report based on naturalWidth\n      this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n      return;\n    }\n  \n    // If none of the checks above matched, simulate loading on detached element.\n    this.proxyImage = new Image();\n    this.proxyImage.addEventListener( 'load', this );\n    this.proxyImage.addEventListener( 'error', this );\n    // bind to image as well for Firefox. #191\n    this.img.addEventListener( 'load', this );\n    this.img.addEventListener( 'error', this );\n    this.proxyImage.src = this.img.src;\n  };\n  \n  LoadingImage.prototype.getIsImageComplete = function() {\n    // check for non-zero, non-undefined naturalWidth\n    // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n    return this.img.complete && this.img.naturalWidth;\n  };\n  \n  LoadingImage.prototype.confirm = function( isLoaded, message ) {\n    this.isLoaded = isLoaded;\n    this.emitEvent( 'progress', [ this, this.img, message ] );\n  };\n  \n  // ----- events ----- //\n  \n  // trigger specified handler for event type\n  LoadingImage.prototype.handleEvent = function( event ) {\n    var method = 'on' + event.type;\n    if ( this[ method ] ) {\n      this[ method ]( event );\n    }\n  };\n  \n  LoadingImage.prototype.onload = function() {\n    this.confirm( true, 'onload' );\n    this.unbindEvents();\n  };\n  \n  LoadingImage.prototype.onerror = function() {\n    this.confirm( false, 'onerror' );\n    this.unbindEvents();\n  };\n  \n  LoadingImage.prototype.unbindEvents = function() {\n    this.proxyImage.removeEventListener( 'load', this );\n    this.proxyImage.removeEventListener( 'error', this );\n    this.img.removeEventListener( 'load', this );\n    this.img.removeEventListener( 'error', this );\n  };\n  \n  // -------------------------- Background -------------------------- //\n  \n  function Background( url, element ) {\n    this.url = url;\n    this.element = element;\n    this.img = new Image();\n  }\n  \n  // inherit LoadingImage prototype\n  Background.prototype = Object.create( LoadingImage.prototype );\n  \n  Background.prototype.check = function() {\n    this.img.addEventListener( 'load', this );\n    this.img.addEventListener( 'error', this );\n    this.img.src = this.url;\n    // check if image is already complete\n    var isComplete = this.getIsImageComplete();\n    if ( isComplete ) {\n      this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n      this.unbindEvents();\n    }\n  };\n  \n  Background.prototype.unbindEvents = function() {\n    this.img.removeEventListener( 'load', this );\n    this.img.removeEventListener( 'error', this );\n  };\n  \n  Background.prototype.confirm = function( isLoaded, message ) {\n    this.isLoaded = isLoaded;\n    this.emitEvent( 'progress', [ this, this.element, message ] );\n  };\n  \n  // -------------------------- jQuery -------------------------- //\n  \n  ImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n    jQuery = jQuery || window.jQuery;\n    if ( !jQuery ) {\n      return;\n    }\n    // set local variable\n    $ = jQuery;\n    // $().imagesLoaded()\n    $.fn.imagesLoaded = function( options, callback ) {\n      var instance = new ImagesLoaded( this, options, callback );\n      return instance.jqDeferred.promise( $(this) );\n    };\n  };\n  // try making plugin\n  ImagesLoaded.makeJQueryPlugin();\n  \n  // --------------------------  -------------------------- //\n  \n  return ImagesLoaded;\n  \n  });\n  \n  /*!\n   * Flickity imagesLoaded v2.0.0\n   * enables imagesLoaded option for Flickity\n   */\n  \n  /*jshint browser: true, strict: true, undef: true, unused: true */\n  \n  ( function( window, factory ) {\n    // universal module definition\n    /*jshint strict: false */ /*globals define, module, require */\n    if ( typeof define == 'function' && define.amd ) {\n      // AMD\n      define( [\n        'flickity/js/index',\n        'imagesloaded/imagesloaded'\n      ], function( Flickity, imagesLoaded ) {\n        return factory( window, Flickity, imagesLoaded );\n      });\n    } else if ( typeof module == 'object' && module.exports ) {\n      // CommonJS\n      module.exports = factory(\n        window,\n        require('flickity'),\n        require('imagesloaded')\n      );\n    } else {\n      // browser global\n      window.Flickity = factory(\n        window,\n        window.Flickity,\n        window.imagesLoaded\n      );\n    }\n  \n  }( window, function factory( window, Flickity, imagesLoaded ) {\n  'use strict';\n  \n  Flickity.createMethods.push('_createImagesLoaded');\n  \n  var proto = Flickity.prototype;\n  \n  proto._createImagesLoaded = function() {\n    this.on( 'activate', this.imagesLoaded );\n  };\n  \n  proto.imagesLoaded = function() {\n    if ( !this.options.imagesLoaded ) {\n      return;\n    }\n    var _this = this;\n    function onImagesLoadedProgress( instance, image ) {\n      var cell = _this.getParentCell( image.img );\n      _this.cellSizeChange( cell && cell.element );\n      if ( !_this.options.freeScroll ) {\n        _this.positionSliderAtSelected();\n      }\n    }\n    imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\n  };\n  \n  return Flickity;\n  \n  }));\n  "]}